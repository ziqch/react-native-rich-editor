export default "<!doctype html><html lang=\"en\"><head><meta charset=\"UTF-8\"><meta name=\"viewport\" content=\"width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1\"/><meta http-equiv=\"Content-Security-Policy\" content=\"default-src * 'unsafe-inline' 'unsafe-eval';img-src * data: blob:\"/><title>ReactNativeRichEditor</title></head><body><script defer=\"defer\">!function(e,t){if(\"object\"==typeof exports&&\"object\"==typeof module)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)(\"object\"==typeof exports?exports:e)[r]=n[r]}}(self,(()=>(()=>{\"use strict\";var e={907:(e,t,n)=>{const r=n(313);e.exports=r},313:(e,t,n)=>{var r=n(592),i=n(408),o=n(969),l=n(998);function s(e){throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?code=${e} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function a(e){let t=l.$getSelection();if(null==t)throw Error(\"Expected valid LexicalSelection\");return l.$isRangeSelection(t)&&t.isCollapsed()||0===t.getNodes().length?\"\":r.$generateHtmlFromNodes(e,t)}function u(e){let t=l.$getSelection();if(null==t)throw Error(\"Expected valid LexicalSelection\");return l.$isRangeSelection(t)&&t.isCollapsed()||0===t.getNodes().length?null:JSON.stringify(f(e,t))}function d(e,t,n){(l.DEPRECATED_$isGridSelection(n)||null!==o.$findMatchingParent(n.anchor.getNode(),(e=>l.DEPRECATED_$isGridCellNode(e)))&&null!==o.$findMatchingParent(n.focus.getNode(),(e=>l.DEPRECATED_$isGridCellNode(e))))&&1===t.length&&l.DEPRECATED_$isGridNode(t[0])?function(e,t,n,r){1===e.length&&l.DEPRECATED_$isGridNode(e[0])||s(42);var i=e[0];e=i.getChildren(),n=i.getFirstChildOrThrow().getChildrenSize();var a=i.getChildrenSize(),u=o.$findMatchingParent(t.anchor.getNode(),(e=>l.DEPRECATED_$isGridCellNode(e)));t=(i=u&&o.$findMatchingParent(u,(e=>l.DEPRECATED_$isGridRowNode(e))))&&o.$findMatchingParent(i,(e=>l.DEPRECATED_$isGridNode(e))),l.DEPRECATED_$isGridCellNode(u)&&l.DEPRECATED_$isGridRowNode(i)&&l.DEPRECATED_$isGridNode(t)||s(43);var d=i.getIndexWithinParent(),c=Math.min(t.getChildrenSize()-1,d+a-1);let f,h;a=u.getIndexWithinParent(),u=Math.min(i.getChildrenSize()-1,a+n-1),n=Math.min(a,u),i=Math.min(d,c),a=Math.max(a,u),d=Math.max(d,c),c=t.getChildren(),u=0;for(let t=i;t<=d;t++){var g=c[t];l.DEPRECATED_$isGridRowNode(g)||s(24);var _=e[u];l.DEPRECATED_$isGridRowNode(_)||s(24),g=g.getChildren(),_=_.getChildren();let r=0;for(let e=n;e<=a;e++){let o=g[e];l.DEPRECATED_$isGridCellNode(o)||s(25);let u=_[r];l.DEPRECATED_$isGridCellNode(u)||s(25),t===i&&e===n?f=o.getKey():t===d&&e===a&&(h=o.getKey());let c=o.getChildren();u.getChildren().forEach((e=>{l.$isTextNode(e)&&l.$createParagraphNode().append(e),o.append(e)})),c.forEach((e=>e.remove())),r++}u++}f&&h&&(e=l.DEPRECATED_$createGridSelection(),e.set(t.getKey(),f,h),l.$setSelection(e),r.dispatchCommand(l.SELECTION_CHANGE_COMMAND,void 0))}(t,n,!1,e):function(e,t){let n=[],r=null;for(let t=0;t<e.length;t++){let i=e[t],o=l.$isLineBreakNode(i);if(o||l.$isDecoratorNode(i)&&i.isInline()||l.$isElementNode(i)&&i.isInline()||l.$isTextNode(i)||i.isParentRequired()){if(null===r&&(r=i.createParentElementNode(),n.push(r),o))continue;null!==r&&r.append(i)}else n.push(i),r=null}l.$isRangeSelection(t)?t.insertNodes(n):l.DEPRECATED_$isGridSelection(t)&&(e=t.anchor.getNode(),l.DEPRECATED_$isGridCellNode(e)||s(41),e.append(...n))}(t,n)}function c(e,t,n,r=[]){let o=null==t||n.isSelected(t),a=l.$isElementNode(n)&&n.excludeFromCopy(\"html\");var u=n;if(null!==t){var d=i.$cloneWithProperties(n);u=d=l.$isTextNode(d)&&null!=t?i.$sliceSelectedTextNodeContent(t,d):d}let f=l.$isElementNode(u)?u.getChildren():[];var h=u;(d=h.exportJSON()).type!==h.constructor.getType()&&s(58);var g=d.children;for(l.$isElementNode(h)&&(Array.isArray(g)||s(59)),l.$isTextNode(u)&&(0<(u=u.__text).length?d.text=u:o=!1),u=0;u<f.length;u++)g=c(e,t,h=f[u],d.children),!o&&l.$isElementNode(n)&&g&&n.extractWithChild(h,t,\"clone\")&&(o=!0);if(o&&!a)r.push(d);else if(Array.isArray(d.children))for(e=0;e<d.children.length;e++)r.push(d.children[e]);return o}function f(e,t){let n=[],r=l.$getRoot().getChildren();for(let i=0;i<r.length;i++)c(e,t,r[i],n);return{namespace:e._config.namespace,nodes:n}}function h(e){let t=[];for(let n=0;n<e.length;n++){let r=l.$parseSerializedNode(e[n]);l.$isTextNode(r)&&i.$addNodeStyle(r),t.push(r)}return t}let g=null;function _(e,t){var n=window.getSelection();if(!n)return!1;var r=n.anchorNode;if(n=n.focusNode,null!==r&&null!==n&&!l.isSelectionWithinEditor(e,r,n))return!1;if(t.preventDefault(),t=t.clipboardData,r=l.$getSelection(),null===t||null===r)return!1;n=a(e),e=u(e);let i=\"\";return null!==r&&(i=r.getTextContent()),null!==n&&t.setData(\"text/html\",n),null!==e&&t.setData(\"application/x-lexical-editor\",e),t.setData(\"text/plain\",i),!0}t.$generateJSONFromSelectedNodes=f,t.$generateNodesFromSerializedNodes=h,t.$getHtmlContent=a,t.$getLexicalContent=u,t.$insertDataTransferForPlainText=function(e,t){null!=(e=e.getData(\"text/plain\"))&&t.insertRawText(e)},t.$insertDataTransferForRichText=function(e,t,n){var i=e.getData(\"application/x-lexical-editor\");if(i)try{let e=JSON.parse(i);if(e.namespace===n._config.namespace&&Array.isArray(e.nodes)){return d(n,h(e.nodes),t)}}catch{}if(i=e.getData(\"text/html\"))try{var o=(new DOMParser).parseFromString(i,\"text/html\");return d(n,r.$generateNodesFromDOM(n,o),t)}catch{}if(null!=(e=e.getData(\"text/plain\")))if(l.$isRangeSelection(t))for(n=(e=e.split(/\\r?\\n/)).length,o=0;o<n;o++)t.insertText(e[o]),o<n-1&&t.insertParagraph();else t.insertRawText(e)},t.$insertGeneratedNodes=d,t.copyToClipboard=async function(e,t){if(null!==g)return!1;if(null!==t)return new Promise((n=>{e.update((()=>{n(_(e,t))}))}));var n=e.getRootElement();let r=document.getSelection();if(null===n||null===r)return!1;let i=document.createElement(\"span\");return i.style.cssText=\"position: fixed; top: -1000px;\",i.append(document.createTextNode(\"#\")),n.append(i),(n=new Range).setStart(i,0),n.setEnd(i,1),r.removeAllRanges(),r.addRange(n),new Promise((t=>{let n=e.registerCommand(l.COPY_COMMAND,(r=>(r instanceof ClipboardEvent&&(n(),null!==g&&(window.clearTimeout(g),g=null),t(_(e,r))),!0)),l.COMMAND_PRIORITY_CRITICAL);g=window.setTimeout((()=>{n(),g=null,t(!1)}),50),document.execCommand(\"copy\"),i.remove()}))}},592:(e,t,n)=>{const r=n(478);e.exports=r},478:(e,t,n)=>{var r=n(408),i=n(998);function o(e,t,n,l=null){let s=null==l||t.isSelected(),a=i.$isElementNode(t)&&t.excludeFromCopy(\"html\");var u=t;null!==l&&(u=r.$cloneWithProperties(t),u=i.$isTextNode(u)&&null!=l?r.$sliceSelectedTextNodeContent(l,u):u);let d=i.$isElementNode(u)?u.getChildren():[],{element:c,after:f}=u.exportDOM(e);if(!c)return!1;let h=new DocumentFragment;for(let n=0;n<d.length;n++){let r=d[n],a=o(e,r,h,l);!s&&i.$isElementNode(t)&&a&&t.extractWithChild(r,l,\"html\")&&(s=!0)}return s&&!a?(c.append(h),n.append(c),f&&(e=f.call(u,c))&&c.replaceWith(e)):n.append(h),s}let l=new Set([\"STYLE\"]);function s(e,t,n=new Map,r,o=!1){let a=[];if(l.has(e.nodeName))return a;let u=null;var{nodeName:d}=e,c=t._htmlConversions.get(d.toLowerCase());if(d=null,void 0!==c)for(f of c)null!==(c=f(e))&&(null===d||d.priority<c.priority)&&(d=c);var f=(f=null!==d?d.conversion:null)?f(e,void 0,o):null;if(d=null,null!==f){if(d=f.after,u=f.node,null!==u){for(var[,h]of n)if(u=h(u,r),!u)break;u&&a.push(u)}null!=f.forChild&&n.set(e.nodeName,f.forChild)}for(e=e.childNodes,r=[],h=0;h<e.length;h++)r.push(...s(e[h],t,new Map(n),u,o||!0===(f&&f.preformatted)));return null!=d&&(r=d(r)),null==u?a=a.concat(r):i.$isElementNode(u)&&u.append(...r),a}t.$generateHtmlFromNodes=function(e,t){if(\"undefined\"==typeof document||\"undefined\"==typeof window)throw Error(\"To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.\");let n=document.createElement(\"div\"),r=i.$getRoot().getChildren();for(let i=0;i<r.length;i++)o(e,r[i],n,t);return n.innerHTML},t.$generateNodesFromDOM=function(e,t){let n=[];t=t.body?t.body.childNodes:[];for(let i=0;i<t.length;i++){var r=t[i];l.has(r.nodeName)||null!==(r=s(r,e))&&(n=n.concat(r))}return n}},903:(e,t,n)=>{const r=n(925);e.exports=r},925:(e,t,n)=>{var r=n(907),i=n(408),o=n(969),l=n(998);function s(e,t){return void 0!==document.caretRangeFromPoint?null===(e=document.caretRangeFromPoint(e,t))?null:{node:e.startContainer,offset:e.startOffset}:\"undefined\"!==document.caretPositionFromPoint?null===(e=document.caretPositionFromPoint(e,t))?null:{node:e.offsetNode,offset:e.offset}:null}let a=\"undefined\"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,u=a&&\"documentMode\"in document?document.documentMode:null;a&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),a&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent);let d=!(!a||!(\"InputEvent\"in window)||u)&&\"getTargetRanges\"in new window.InputEvent(\"input\"),c=a&&/Version\\/[\\d.]+.*Safari/.test(navigator.userAgent),f=a&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,h=a&&/^(?=.*Chrome).*/i.test(navigator.userAgent),g=a&&/AppleWebKit\\/[\\d.]+/.test(navigator.userAgent)&&!h,_=l.createCommand(\"DRAG_DROP_PASTE_FILE\");class p extends l.ElementNode{static getType(){return\"quote\"}static clone(e){return new p(e.__key)}constructor(e){super(e)}createDOM(e){let t=document.createElement(\"blockquote\");return o.addClassNamesToElement(t,e.theme.quote),t}updateDOM(){return!1}static importDOM(){return{blockquote:()=>({conversion:N,priority:0})}}static importJSON(e){let t=y();return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportJSON(){return{...super.exportJSON(),type:\"quote\"}}insertNewAfter(e,t){e=l.$createParagraphNode();let n=this.getDirection();return e.setDirection(n),this.insertAfter(e,t),e}collapseAtStart(){let e=l.$createParagraphNode();return this.getChildren().forEach((t=>e.append(t))),this.replace(e),!0}}function y(){return l.$applyNodeReplacement(new p)}class m extends l.ElementNode{static getType(){return\"heading\"}static clone(e){return new m(e.__tag,e.__key)}constructor(e,t){super(t),this.__tag=e}getTag(){return this.__tag}createDOM(e){let t=this.__tag,n=document.createElement(t);return void 0!==(e=e.theme.heading)&&o.addClassNamesToElement(n,e[t]),n}updateDOM(){return!1}static importDOM(){return{h1:()=>({conversion:C,priority:0}),h2:()=>({conversion:C,priority:0}),h3:()=>({conversion:C,priority:0}),h4:()=>({conversion:C,priority:0}),h5:()=>({conversion:C,priority:0}),h6:()=>({conversion:C,priority:0}),p:e=>null!==(e=e.firstChild)&&v(e)?{conversion:()=>({node:null}),priority:3}:null,span:e=>v(e)?{conversion:()=>({node:T(\"h1\")}),priority:3}:null}}static importJSON(e){let t=T(e.tag);return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportJSON(){return{...super.exportJSON(),tag:this.getTag(),type:\"heading\",version:1}}insertNewAfter(e,t=!0){e=0<(e=e?e.anchor.offset:0)&&e<this.getTextContentSize()?T(this.getTag()):l.$createParagraphNode();let n=this.getDirection();return e.setDirection(n),this.insertAfter(e,t),e}collapseAtStart(){let e=this.isEmpty()?l.$createParagraphNode():T(this.getTag());return this.getChildren().forEach((t=>e.append(t))),this.replace(e),!0}extractWithChild(){return!0}}function v(e){return\"span\"===e.nodeName.toLowerCase()&&\"26pt\"===e.style.fontSize}function C(e){let t=null;return\"h1\"!==(e=e.nodeName.toLowerCase())&&\"h2\"!==e&&\"h3\"!==e&&\"h4\"!==e&&\"h5\"!==e&&\"h6\"!==e||(t=T(e)),{node:t}}function N(){return{node:y()}}function T(e){return l.$applyNodeReplacement(new m(e))}function x(e){let t=null;if(e instanceof DragEvent?t=e.dataTransfer:e instanceof ClipboardEvent&&(t=e.clipboardData),null===t)return[!1,[],!1];var n=t.types;return e=n.includes(\"Files\"),n=n.includes(\"text/html\")||n.includes(\"text/plain\"),[e,Array.from(t.files),n]}function S(e,t){var n=l.$getSelection();if(l.$isRangeSelection(n)){var r=new Set;n=n.getNodes();for(let i=0;i<n.length;i++){let l=n[i],s=l.getKey();if(r.has(s))continue;let a=o.$getNearestBlockElementAncestorOrThrow(l),u=a.getKey();a.canInsertTab()?(e(l),r.add(s)):a.canIndent()&&!r.has(u)&&(r.add(u),t(a))}}}function E(e){return e=l.$getNearestNodeFromDOMNode(e),l.$isDecoratorNode(e)}t.$createHeadingNode=T,t.$createQuoteNode=y,t.$isHeadingNode=function(e){return e instanceof m},t.$isQuoteNode=function(e){return e instanceof p},t.DRAG_DROP_PASTE=_,t.HeadingNode=m,t.QuoteNode=p,t.eventFiles=x,t.registerRichText=function(e){return o.mergeRegister(e.registerCommand(l.CLICK_COMMAND,(()=>{const e=l.$getSelection();return!!l.$isNodeSelection(e)&&(e.clear(),!0)}),0),e.registerCommand(l.DELETE_CHARACTER_COMMAND,(e=>{const t=l.$getSelection();return!!l.$isRangeSelection(t)&&(t.deleteCharacter(e),!0)}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.DELETE_WORD_COMMAND,(e=>{const t=l.$getSelection();return!!l.$isRangeSelection(t)&&(t.deleteWord(e),!0)}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.DELETE_LINE_COMMAND,(e=>{const t=l.$getSelection();return!!l.$isRangeSelection(t)&&(t.deleteLine(e),!0)}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.CONTROLLED_TEXT_INSERTION_COMMAND,(t=>{const n=l.$getSelection();if(\"string\"==typeof t)l.$isRangeSelection(n)?n.insertText(t):l.DEPRECATED_$isGridSelection(n);else{if(!l.$isRangeSelection(n)&&!l.DEPRECATED_$isGridSelection(n))return!1;const i=t.dataTransfer;null!=i?r.$insertDataTransferForRichText(i,n,e):l.$isRangeSelection(n)&&(t=t.data)&&n.insertText(t)}return!0}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.REMOVE_TEXT_COMMAND,(()=>{const e=l.$getSelection();return!!l.$isRangeSelection(e)&&(e.removeText(),!0)}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.FORMAT_TEXT_COMMAND,(e=>{const t=l.$getSelection();return!!l.$isRangeSelection(t)&&(t.formatText(e),!0)}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.FORMAT_ELEMENT_COMMAND,(e=>{var t=l.$getSelection();if(!l.$isRangeSelection(t)&&!l.$isNodeSelection(t))return!1;t=t.getNodes();for(const n of t)o.$getNearestBlockElementAncestorOrThrow(n).setFormat(e);return!0}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.INSERT_LINE_BREAK_COMMAND,(e=>{const t=l.$getSelection();return!!l.$isRangeSelection(t)&&(t.insertLineBreak(e),!0)}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.INSERT_PARAGRAPH_COMMAND,(()=>{const e=l.$getSelection();return!!l.$isRangeSelection(e)&&(e.insertParagraph(),!0)}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.INDENT_CONTENT_COMMAND,(()=>(S((()=>{e.dispatchCommand(l.CONTROLLED_TEXT_INSERTION_COMMAND,\"\\t\")}),(e=>{const t=e.getIndent();10!==t&&e.setIndent(t+1)})),!0)),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.OUTDENT_CONTENT_COMMAND,(()=>(S((t=>{l.$isTextNode(t)&&(\"\\t\"===(t=t.getTextContent())[t.length-1]&&e.dispatchCommand(l.DELETE_CHARACTER_COMMAND,!0))}),(e=>{const t=e.getIndent();0!==t&&e.setIndent(t-1)})),!0)),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.KEY_ARROW_UP_COMMAND,(e=>{var t=l.$getSelection();if(l.$isNodeSelection(t)&&!E(e.target)){if(0<(e=t.getNodes()).length)return e[0].selectPrevious(),!0}else if(l.$isRangeSelection(t)){if(t=l.$getAdjacentNode(t.focus,!0),l.$isDecoratorNode(t)&&!t.isIsolated()&&!t.isInline())return t.selectPrevious(),e.preventDefault(),!0;if(l.$isElementNode(t)&&!t.isInline()&&!t.canBeEmpty())return t.select(),e.preventDefault(),!0}return!1}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.KEY_ARROW_DOWN_COMMAND,(e=>{var t=l.$getSelection();if(l.$isNodeSelection(t)){if(0<(e=t.getNodes()).length)return e[0].selectNext(0,0),!0}else if(l.$isRangeSelection(t)){let n=t.focus;if(\"root\"===n.key&&n.offset===l.$getRoot().getChildrenSize())return e.preventDefault(),!0;if(t=l.$getAdjacentNode(t.focus,!1),l.$isDecoratorNode(t)&&!t.isIsolated()&&!t.isInline())return t.selectNext(),e.preventDefault(),!0}return!1}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.KEY_ARROW_LEFT_COMMAND,(e=>{const t=l.$getSelection();if(l.$isNodeSelection(t)){var n=t.getNodes();if(0<n.length)return e.preventDefault(),n[0].selectPrevious(),!0}return!!l.$isRangeSelection(t)&&(!!i.$shouldOverrideDefaultCharacterSelection(t,!0)&&(n=e.shiftKey,e.preventDefault(),i.$moveCharacter(t,n,!0),!0))}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.KEY_ARROW_RIGHT_COMMAND,(e=>{const t=l.$getSelection();if(l.$isNodeSelection(t)&&!E(e.target)){var n=t.getNodes();if(0<n.length)return e.preventDefault(),n[0].selectNext(0,0),!0}return!!l.$isRangeSelection(t)&&(n=e.shiftKey,!!i.$shouldOverrideDefaultCharacterSelection(t,!1)&&(e.preventDefault(),i.$moveCharacter(t,n,!1),!0))}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.KEY_BACKSPACE_COMMAND,(t=>{if(E(t.target))return!1;const n=l.$getSelection();if(!l.$isRangeSelection(n))return!1;t.preventDefault(),({anchor:t}=n);const r=t.getNode();return n.isCollapsed()&&0===t.offset&&!l.$isRootNode(r)&&0<o.$getNearestBlockElementAncestorOrThrow(r).getIndent()?e.dispatchCommand(l.OUTDENT_CONTENT_COMMAND,void 0):e.dispatchCommand(l.DELETE_CHARACTER_COMMAND,!0)}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.KEY_DELETE_COMMAND,(t=>{if(E(t.target))return!1;const n=l.$getSelection();return!!l.$isRangeSelection(n)&&(t.preventDefault(),e.dispatchCommand(l.DELETE_CHARACTER_COMMAND,!1))}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.KEY_ENTER_COMMAND,(t=>{const n=l.$getSelection();if(!l.$isRangeSelection(n))return!1;if(null!==t){if((f||c||g)&&d)return!1;if(t.preventDefault(),t.shiftKey)return e.dispatchCommand(l.INSERT_LINE_BREAK_COMMAND,!1)}return e.dispatchCommand(l.INSERT_PARAGRAPH_COMMAND,void 0)}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.KEY_ESCAPE_COMMAND,(()=>{const t=l.$getSelection();return!!l.$isRangeSelection(t)&&(e.blur(),!0)}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.DROP_COMMAND,(t=>{const[,n]=x(t);if(0<n.length){var r=s(t.clientX,t.clientY);if(null!==r){const{offset:t,node:o}=r;var i=l.$getNearestNodeFromDOMNode(o);if(null!==i){if(r=l.$createRangeSelection(),l.$isTextNode(i))r.anchor.set(i.getKey(),t,\"text\"),r.focus.set(i.getKey(),t,\"text\");else{const e=i.getParentOrThrow().getKey();i=i.getIndexWithinParent()+1,r.anchor.set(e,i,\"element\"),r.focus.set(e,i,\"element\")}r=l.$normalizeSelection__EXPERIMENTAL(r),l.$setSelection(r)}e.dispatchCommand(_,n)}return t.preventDefault(),!0}return t=l.$getSelection(),!!l.$isRangeSelection(t)}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.DRAGSTART_COMMAND,(e=>{[e]=x(e);const t=l.$getSelection();return!(e&&!l.$isRangeSelection(t))}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.DRAGOVER_COMMAND,(e=>{var[t]=x(e);const n=l.$getSelection();return!(t&&!l.$isRangeSelection(n))&&(null!==(t=s(e.clientX,e.clientY))&&(t=l.$getNearestNodeFromDOMNode(t.node),l.$isDecoratorNode(t)&&e.preventDefault()),!0)}),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.COPY_COMMAND,(t=>(r.copyToClipboard(e,t instanceof ClipboardEvent?t:null),!0)),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.CUT_COMMAND,(t=>(async function(e,t){await r.copyToClipboard(t,e instanceof ClipboardEvent?e:null),t.update((()=>{let e=l.$getSelection();l.$isRangeSelection(e)?e.removeText():l.$isNodeSelection(e)&&e.getNodes().forEach((e=>e.remove()))}))}(t,e),!0)),l.COMMAND_PRIORITY_EDITOR),e.registerCommand(l.PASTE_COMMAND,(t=>{const[,n,i]=x(t);if(0<n.length&&!i)return e.dispatchCommand(_,n),!0;const o=l.$getSelection();return!(!l.$isRangeSelection(o)&&!l.DEPRECATED_$isGridSelection(o))&&(function(e,t){e.preventDefault(),t.update((()=>{let n=l.$getSelection(),i=e instanceof InputEvent||e instanceof KeyboardEvent?null:e.clipboardData;null!=i&&(l.$isRangeSelection(n)||l.DEPRECATED_$isGridSelection(n))&&r.$insertDataTransferForRichText(i,n,t)}),{tag:\"paste\"})}(t,e),!0)}),l.COMMAND_PRIORITY_EDITOR))}},408:(e,t,n)=>{const r=n(235);e.exports=r},235:(e,t,n)=>{var r=n(998);let i=new Map;function o(e){for(;null!=e;){if(e.nodeType===Node.TEXT_NODE)return e;e=e.firstChild}return null}function l(e){let t=e.parentNode;if(null==t)throw Error(\"Should never happen\");return[t,Array.from(t.childNodes).indexOf(e)]}function s(e){let t={};e=e.split(\";\");for(let n of e)if(\"\"!==n){let[e,r]=n.split(/:([^]+)/);t[e.trim()]=r.trim()}return t}function a(e){let t=i.get(e);return void 0===t&&(t=s(e),i.set(e,t)),t}function u(e,t){var n=a(\"getStyle\"in e?e.getStyle():e.style);n=function(e){let t=\"\";for(let n in e)n&&(t+=`${n}: ${e[n]};`);return t}(t=Object.entries(t).reduce(((e,[t,n])=>(null===n?delete e[t]:e[t]=n,e)),{...n})),e.setStyle(n),i.set(n,t)}function d(e){for(;null!==e&&!r.$isRootOrShadowRoot(e);){let t=e.getLatest(),n=e.getParent();0===t.getChildrenSize()&&e.remove(!0),e=n}}function c(e,t,n,i,o=null){if(0!==t.length){var l=t[0],s=new Map,a=[];(l=r.$isElementNode(l)?l:l.getParentOrThrow()).isInline()&&(l=l.getParentOrThrow());for(var u=!1;null!==l;){var c=l.getPreviousSibling();if(null!==c){l=c,u=!0;break}if(l=l.getParentOrThrow(),r.$isRootOrShadowRoot(l))break}c=new Set;for(var f=0;f<n;f++){var h=t[f];r.$isElementNode(h)&&0===h.getChildrenSize()&&c.add(h.getKey())}var g=new Set;for(f=0;f<n;f++){var _=(h=t[f]).getParent();if(null!==_&&_.isInline()&&(_=_.getParent()),null!==_&&r.$isLeafNode(h)&&!g.has(h.getKey())){if(h=_.getKey(),void 0===s.get(h)){let e=i();e.setFormat(_.getFormatType()),e.setIndent(_.getIndent()),a.push(e),s.set(h,e),_.getChildren().forEach((t=>{e.append(t),g.add(t.getKey()),r.$isElementNode(t)&&t.getChildrenKeys().forEach((e=>g.add(e)))})),d(_)}}else c.has(h.getKey())&&((_=i()).setFormat(h.getFormatType()),_.setIndent(h.getIndent()),a.push(_),h.remove(!0))}if(null!==o)for(t=0;t<a.length;t++)o.append(a[t]);if(t=null,r.$isRootOrShadowRoot(l))if(u)if(null!==o)l.insertAfter(o);else for(o=a.length-1;0<=o;o--)l.insertAfter(a[o]);else if(u=l.getFirstChild(),r.$isElementNode(u)&&(l=u),null===u)if(o)l.append(o);else for(o=0;o<a.length;o++)u=a[o],l.append(u),t=u;else if(null!==o)u.insertBefore(o);else for(l=0;l<a.length;l++)o=a[l],u.insertBefore(o),t=o;else if(o)l.insertAfter(o);else for(o=a.length-1;0<=o;o--)u=a[o],l.insertAfter(u),t=u;a=r.$getPreviousSelection(),r.$isRangeSelection(a)&&a.anchor.getNode().isAttached()&&a.focus.getNode().isAttached()?r.$setSelection(a.clone()):null!==t?t.selectEnd():e.dirty=!0}}function f(e,t,n,r){e.modify(t?\"extend\":\"move\",n,r)}function h(e){return e=e.anchor.getNode(),\"rtl\"===(r.$isRootNode(e)?e:e.getParentOrThrow()).getDirection()}t.$addNodeStyle=function(e){let t=s(e=e.getStyle());i.set(e,t)},t.$cloneWithProperties=function(e){let t=(e=e.getLatest()).constructor.clone(e);return t.__parent=e.__parent,t.__next=e.__next,t.__prev=e.__prev,r.$isElementNode(e)&&r.$isElementNode(t)?(t.__first=e.__first,t.__last=e.__last,t.__size=e.__size,t.__format=e.__format,t.__indent=e.__indent,t.__dir=e.__dir,t):(r.$isTextNode(e)&&r.$isTextNode(t)&&(t.__format=e.__format,t.__style=e.__style,t.__mode=e.__mode,t.__detail=e.__detail),t)},t.$getSelectionStyleValueForProperty=function(e,t,n=\"\"){let i=null,o=e.getNodes();var l=e.anchor,s=e.focus,u=e.isBackward();let d=u?s.offset:l.offset;if(l=u?s.getNode():l.getNode(),\"\"!==e.style&&(null!==(e=a(e.style))&&t in e))return e[t];for(e=0;e<o.length;e++){var c=o[e];if((0===e||0!==d||!c.is(l))&&r.$isTextNode(c))if(s=t,u=n,s=null!==(c=a(c=c.getStyle()))&&c[s]||u,null===i)i=s;else if(i!==s){i=\"\";break}}return null===i?n:i},t.$isAtNodeEnd=function(e){return\"text\"===e.type?e.offset===e.getNode().getTextContentSize():e.offset===e.getNode().getChildrenSize()},t.$isParentElementRTL=h,t.$moveCaretSelection=f,t.$moveCharacter=function(e,t,n){let r=h(e);f(e,t,n?!r:r,\"character\")},t.$patchStyleText=function(e,t){var n=e.getNodes();let i=n.length-1,o=n[0],l=n[i];if(e.isCollapsed())u(e,t);else{var s=e.anchor,a=e.focus,d=o.getTextContent().length,c=a.offset,f=s.offset,h=s.isBefore(a),g=h?f:c;e=h?c:f;var _=h?s.type:a.type,p=h?a.type:s.type;if(s=h?a.key:s.key,r.$isTextNode(o)&&g===d&&(a=o.getNextSibling(),r.$isTextNode(a)&&(g=f=0,o=a)),1===n.length)r.$isTextNode(o)&&((g=\"element\"===_?0:f>c?c:f)!==(e=\"element\"===p?d:f>c?f:c)&&(0===g&&e===d?(u(o,t),o.select(g,e)):(n=o.splitText(g,e),u(n=0===g?n[0]:n[1],t),n.select(0,e-g))));else for(r.$isTextNode(o)&&g<o.getTextContentSize()&&(0!==g&&(o=o.splitText(g)[1]),u(o,t)),r.$isTextNode(l)&&(g=l.getTextContent().length,l.__key!==s&&0!==e&&(e=g),e!==g&&([l]=l.splitText(e)),0!==e&&u(l,t)),e=1;e<i;e++)d=(g=n[e]).getKey(),r.$isTextNode(g)&&d!==o.getKey()&&d!==l.getKey()&&!g.isToken()&&u(g,t)}},t.$selectAll=function(e){let t=e.anchor;e=e.focus;var n=t.getNode().getTopLevelElementOrThrow().getParentOrThrow();let i=n.getFirstDescendant();n=n.getLastDescendant();let o=\"element\",l=\"element\",s=0;r.$isTextNode(i)?o=\"text\":r.$isElementNode(i)||null===i||(i=i.getParentOrThrow()),r.$isTextNode(n)?(l=\"text\",s=n.getTextContentSize()):r.$isElementNode(n)||null===n||(n=n.getParentOrThrow()),i&&n&&(t.set(i.getKey(),0,o),e.set(n.getKey(),s,l))},t.$setBlocksType=function(e,t){if(\"root\"===e.anchor.key){t=t();var n=r.$getRoot();(e=n.getFirstChild())?e.replace(t,!0):n.append(t)}else for(n=e.getNodes(),e=e.anchor.getNode().getParentOrThrow(),-1===n.indexOf(e)&&n.push(e),e.isInline()&&(e=e.getParentOrThrow(),-1===n.indexOf(e)&&n.push(e)),e=0;e<n.length;e++){let l=n[e];var i=l;if(!r.$isElementNode(i)||r.$isRootOrShadowRoot(i))i=!1;else{var o=i.getFirstChild();o=null===o||r.$isTextNode(o)||o.isInline(),i=!i.isInline()&&!1!==i.canBeEmpty()&&o}i&&((i=t()).setFormat(l.getFormatType()),i.setIndent(l.getIndent()),l.replace(i,!0))}},t.$shouldOverrideDefaultCharacterSelection=function(e,t){return e=r.$getAdjacentNode(e.focus,t),r.$isDecoratorNode(e)&&!e.isIsolated()||r.$isElementNode(e)&&!e.isInline()&&!e.canBeEmpty()},t.$sliceSelectedTextNodeContent=function(e,t){if(t.isSelected()&&!t.isSegmented()&&!t.isToken()&&(r.$isRangeSelection(e)||r.DEPRECATED_$isGridSelection(e))){var n=e.anchor.getNode(),i=e.focus.getNode(),o=t.is(n),l=t.is(i);if(o||l){o=e.isBackward();let r,[s,a]=e.getCharacterOffsets();e=n.is(i),l=t.is(o?i:n),i=t.is(o?n:i),n=0,e?(n=s>a?a:s,r=s>a?s:a):l?(n=o?a:s,r=void 0):i&&(n=0,r=o=o?s:a),t.__text=t.__text.slice(n,r)}}return t},t.$wrapNodes=function(e,t,n=null){var i=e.getNodes();let o=i.length;var l=e.anchor;if(0===o||1===o&&\"element\"===l.type&&0===l.getNode().getChildrenSize()){i=(e=\"text\"===l.type?l.getNode().getParentOrThrow():l.getNode()).getChildren();let r=t();r.setFormat(e.getFormatType()),r.setIndent(e.getIndent()),i.forEach((e=>r.append(e))),n&&(r=n.append(r)),e.replace(r)}else{l=null;var s=[];for(let a=0;a<o;a++){let o=i[a];r.$isRootOrShadowRoot(o)?(c(e,s,s.length,t,n),s=[],l=o):null===l||null!==l&&r.$hasAncestor(o,l)?s.push(o):(c(e,s,s.length,t,n),s=[o])}c(e,s,s.length,t,n)}},t.createDOMRange=function(e,t,n,i,s){let a=t.getKey(),u=i.getKey(),d=document.createRange(),c=e.getElementByKey(a);if(e=e.getElementByKey(u),r.$isTextNode(t)&&(c=o(c)),r.$isTextNode(i)&&(e=o(e)),void 0===t||void 0===i||null===c||null===e)return null;\"BR\"===c.nodeName&&([c,n]=l(c)),\"BR\"===e.nodeName&&([e,s]=l(e)),t=c.firstChild,c===e&&null!=t&&\"BR\"===t.nodeName&&0===n&&0===s&&(s=1);try{d.setStart(c,n),d.setEnd(e,s)}catch(e){return null}return!d.collapsed||n===s&&a===u||(d.setStart(e,s),d.setEnd(c,n)),d},t.createRectsFromDOMRange=function(e,t){var n=e.getRootElement();if(null===n)return[];e=n.getBoundingClientRect(),n=getComputedStyle(n),n=parseFloat(n.paddingLeft)+parseFloat(n.paddingRight);let r,i=(t=Array.from(t.getClientRects())).length;for(let o=0;o<i;o++){let l=t[o],s=l.width+n===e.width;r&&r.top===l.top&&r.left===l.left&&r.width===l.width&&r.height===l.height||s?(t.splice(o--,1),i--):r=l}return t},t.getStyleObjectFromCSS=a,t.trimTextContentFromAnchor=function(e,t,n){let i=t.getNode();if(r.$isElementNode(i)){var o=i.getDescendantByIndex(t.offset);null!==o&&(i=o)}for(;0<n&&null!==i;){var l=i.getPreviousSibling(),s=0;if(null===l){for(var a=(o=i.getParentOrThrow()).getPreviousSibling();null===a;){if(null===(o=o.getParent())){l=null;break}a=o.getPreviousSibling()}null!==o&&(s=o.isInline()?0:2,l=r.$isElementNode(a)?a.getLastDescendant():a)}if(\"\"===(a=i.getTextContent())&&r.$isElementNode(i)&&!i.isInline()&&(a=\"\\n\\n\"),o=i.getTextContentSize(),!r.$isTextNode(i)||n>=o)a=i.getParent(),i.remove(),null==a||0!==a.getChildrenSize()||r.$isRootNode(a)||a.remove(),n-=o+s,i=l;else{let u=i.getKey();s=e.getEditorState().read((()=>{const e=r.$getNodeByKey(u);return r.$isTextNode(e)&&e.isSimpleText()?e.getTextContent():null})),l=o-n;let d=a.slice(0,l);null!==s&&s!==a?(n=r.$getPreviousSelection(),o=i,i.isSimpleText()?i.setTextContent(s):(o=r.$createTextNode(s),i.replace(o)),r.$isRangeSelection(n)&&n.isCollapsed()&&(n=n.anchor.offset,o.select(n,n))):i.isSimpleText()?(s=t.key===u,(a=t.offset)<n&&(a=o),n=s?a-n:0,o=s?a:l,s&&0===n?([n]=i.splitText(n,o),n.remove()):([,n]=i.splitText(n,o),n.remove())):(n=r.$createTextNode(d),i.replace(n)),n=0}}}},969:(e,t,n)=>{const r=n(502);e.exports=r},502:(e,t,n)=>{var r=n(408),i=n(998);function o(e,t){for(let n of t)if(e.type.startsWith(n))return!0;return!1}function l(e,t){for(;e!==i.$getRoot()&&null!=e;){if(t(e))return e;e=e.getParent()}return null}function s(e){return 1===e.nodeType}t.$splitNode=i.$splitNode,t.$dfs=function(e,t){let n=[];e=(e||i.$getRoot()).getLatest(),t=t||(i.$isElementNode(e)?e.getLastDescendant():e);for(var r=e,o=0;null!==(r=r.getParent());)o++;for(r=o;null!==e&&!e.is(t);)if(n.push({depth:r,node:e}),i.$isElementNode(e)&&0<e.getChildrenSize())e=e.getFirstChild(),r++;else for(o=null;null===o&&null!==e;)null===(o=e.getNextSibling())?(e=e.getParent(),r--):e=o;return null!==e&&e.is(t)&&n.push({depth:r,node:e}),n},t.$findMatchingParent=l,t.$getNearestBlockElementAncestorOrThrow=function(e){if(e=l(e,(e=>i.$isElementNode(e)&&!e.isInline())),!i.$isElementNode(e))throw Error(\"Minified Lexical error #4; visit https://lexical.dev/docs/error?code=4 for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\");return e},t.$getNearestNodeOfType=function(e,t){for(;null!=e;){if(e instanceof t)return e;e=e.getParent()}return null},t.$insertNodeToNearestRoot=function(e){var t=i.$getSelection();if(i.$isRangeSelection(t)){var{focus:n}=t;if(t=n.getNode(),n=n.offset,i.$isRootOrShadowRoot(t))null==(n=t.getChildAtIndex(n))?t.append(e):n.insertBefore(e),e.selectNext();else{let r,o;i.$isTextNode(t)?(r=t.getParentOrThrow(),o=t.getIndexWithinParent(),0<n&&(o+=1,t.splitText(n))):(r=t,o=n),[,t]=i.$splitNode(r,o),t.insertBefore(e),t.selectStart()}}else i.$isNodeSelection(t)||i.DEPRECATED_$isGridSelection(t)?(t=t.getNodes())[t.length-1].getTopLevelElementOrThrow().insertAfter(e):i.$getRoot().append(e),t=i.$createParagraphNode(),e.insertAfter(t),t.select();return e.getLatest()},t.$restoreEditorState=function(e,t){let n=new Map,o=e._pendingEditorState;for(let[e,o]of t._nodeMap){let t=r.$cloneWithProperties(o);i.$isTextNode(t)&&(t.__text=o.__text),n.set(e,t)}o&&(o._nodeMap=n),e._dirtyType=2,e=t._selection,i.$setSelection(null===e?null:e.clone())},t.$wrapNodeInElement=function(e,t){return t=t(),e.replace(t),t.append(e),t},t.addClassNamesToElement=function(e,...t){t.forEach((t=>{\"string\"==typeof t&&(t=t.split(\" \").filter((e=>\"\"!==e)),e.classList.add(...t))}))},t.isHTMLAnchorElement=function(e){return s(e)&&\"A\"===e.tagName},t.isHTMLElement=s,t.isMimeType=o,t.mediaFileReader=function(e,t){let n=e[Symbol.iterator]();return new Promise(((e,r)=>{let i=[],l=()=>{const{done:s,value:a}=n.next();if(s)return e(i);const u=new FileReader;u.addEventListener(\"error\",r),u.addEventListener(\"load\",(()=>{const e=u.result;\"string\"==typeof e&&i.push({file:a,result:e}),l()})),o(a,t)?u.readAsDataURL(a):l()};l()}))},t.mergeRegister=function(...e){return()=>{e.forEach((e=>e()))}},t.registerNestedElementResolver=function(e,t,n,r){return e.registerNodeTransform(t,(e=>{e:{for(var i=e.getChildren(),o=0;o<i.length;o++)if(i[o]instanceof t){i=null;break e}for(i=e;null!==i;)if(o=i,(i=i.getParent())instanceof t){i={child:o,parent:i};break e}i=null}if(null!==i){const{child:t,parent:l}=i;if(t.is(e)){if(r(l,e),i=(e=t.getNextSiblings()).length,l.insertAfter(t),0!==i){o=n(l),t.insertAfter(o);for(let t=0;t<i;t++)o.append(e[t])}l.canBeEmpty()||0!==l.getChildrenSize()||l.remove()}}}))},t.removeClassNamesFromElement=function(e,...t){t.forEach((t=>{\"string\"==typeof t&&e.classList.remove(...t.split(\" \"))}))}},998:(e,t,n)=>{const r=n(556);e.exports=r},556:(e,t)=>{let n={},r={},i={},o={},l={},s={},a={},u={},d={},c={},f={},h={},g={},_={},p={},y={},m={},v={},C={},N={},T={},x={},S={},E={},b={},O={},w={},D={},A={},k={},P={},M={},R={},$={},I={};function L(e){throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?code=${e} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}let F=\"undefined\"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,B=F&&\"documentMode\"in document?document.documentMode:null,W=F&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),K=F&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),z=!(!F||!(\"InputEvent\"in window)||B)&&\"getTargetRanges\"in new window.InputEvent(\"input\"),G=F&&/Version\\/[\\d.]+.*Safari/.test(navigator.userAgent),j=F&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Y=F&&/^(?=.*Chrome).*/i.test(navigator.userAgent),H=F&&/AppleWebKit\\/[\\d.]+/.test(navigator.userAgent)&&!Y,J=G||j||H?\" \":\"​\",U=K?\" \":J,V=/^[^A-Za-z\\u00c0-\\u00d6\\u00d8-\\u00f6\\u00f8-\\u02b8\\u0300-\\u0590\\u0800-\\u1fff\\u200e\\u2c00-\\ufb1c\\ufe00-\\ufe6f\\ufefd-\\uffff]*[\\u0591-\\u07ff\\ufb1d-\\ufdfd\\ufe70-\\ufefc]/,X=/^[^\\u0591-\\u07ff\\ufb1d-\\ufdfd\\ufe70-\\ufefc]*[A-Za-z\\u00c0-\\u00d6\\u00d8-\\u00f6\\u00f8-\\u02b8\\u0300-\\u0590\\u0800-\\u1fff\\u200e\\u2c00-\\ufb1c\\ufe00-\\ufe6f\\ufefd-\\uffff]/,q={bold:1,code:16,highlight:128,italic:2,strikethrough:4,subscript:32,superscript:64,underline:8},Q={directionless:1,unmergeable:2},Z={center:2,end:6,justify:4,left:1,right:3,start:5},ee={2:\"center\",6:\"end\",4:\"justify\",1:\"left\",3:\"right\",5:\"start\"},te={normal:0,segmented:2,token:1},ne={0:\"normal\",2:\"segmented\",1:\"token\"},re=!1,ie=0;function oe(e){ie=e.timeStamp}function le(e,t,n){return t.__lexicalLineBreak===e||void 0!==e[`__lexicalKey_${n._key}`]}function se(e,t,n){re=!0;let r=100<performance.now()-ie;try{rr(e,(()=>{let i=Pn()||function(e){return e.getEditorState().read((()=>{let e=Pn();return null!==e?e.clone():null}))}(e);var o=new Map,l=e.getRootElement(),s=e._editorState,a=e._blockCursorElement;let u=!1,d=\"\";for(var c=0;c<t.length;c++){var f=t[c],h=f.type,g=f.target,_=be(g,s);if(!(null===_&&g!==l||or(_)))if(\"characterData\"===h){if(f=r&&kr(_))e:{h=g;var p=_;if(pn(f=i)){var y=f.anchor.getNode();if(y.is(p)&&f.format!==y.getFormat()){f=!1;break e}}f=3===h.nodeType&&p.isAttached()}f&&(h=f=null,null!==(p=et(e._window))&&p.anchorNode===g&&(f=p.anchorOffset,h=p.focusOffset),null!==(g=g.nodeValue)&&Ie(_,g,f,h,!1))}else if(\"childList\"===h){for(u=!0,h=f.addedNodes,p=0;p<h.length;p++){var m=Ee(y=h[p]),v=y.parentNode;null==v||y===a||null!==m||\"BR\"===y.nodeName&&le(y,v,e)||(K&&(m=y.innerText||y.nodeValue)&&(d+=m),v.removeChild(y))}if(0<(h=(f=f.removedNodes).length)){for(p=0,y=0;y<h;y++)(\"BR\"===(v=f[y]).nodeName&&le(v,g,e)||a===v)&&(g.appendChild(v),p++);h!==p&&(g===l&&(_=s._nodeMap.get(\"root\")),o.set(g,_))}}}if(0<o.size)for(let[t,n]of o)if(sr(n))for(o=n.getChildrenKeys(),l=t.firstChild,s=0;s<o.length;s++)null!==(a=e.getElementByKey(o[s]))&&(null==l?(t.appendChild(a),l=a):l!==a&&t.replaceChild(a,l),l=l.nextSibling);else kr(n)&&n.markDirty();if(0<(o=n.takeRecords()).length){for(l=0;l<o.length;l++)for(s=(a=o[l]).addedNodes,a=a.target,c=0;c<s.length;c++)null==(g=(_=s[c]).parentNode)||\"BR\"!==_.nodeName||le(_,a,e)||g.removeChild(_);n.takeRecords()}null!==i&&(u&&(i.dirty=!0,Ae(i)),K&&Ke(e)&&i.insertRawText(d))}))}finally{re=!1}}function ae(e){let t=e._observer;if(null!==t){se(e,t.takeRecords(),t)}}function ue(e){0===ie&&He(e).addEventListener(\"textInput\",oe,!0),e._observer=new MutationObserver(((t,n)=>{se(e,t,n)}))}let de=1,ce=\"function\"==typeof queueMicrotask?queueMicrotask:e=>{Promise.resolve().then(e)};function fe(e){let t=document.activeElement;if(null===t)return!1;let n=t.nodeName;return or(be(e))&&(\"INPUT\"===n||\"TEXTAREA\"===n||\"true\"===t.contentEditable&&null==t.__lexicalEditor)}function he(e,t,n){let r=e.getRootElement();try{return null!==r&&r.contains(t)&&r.contains(n)&&null!==t&&!fe(t)&&ge(t)===e}catch(e){return!1}}function ge(e){for(;null!=e;){let t=e.__lexicalEditor;if(null!=t)return t;e=je(e)}return null}function _e(e){return e.isToken()||e.isSegmented()}function pe(e){for(;null!=e;){if(3===e.nodeType)return e;e=e.firstChild}return null}function ye(e,t,n){return e&(t=q[t])&&(null===n||0==(n&t))?e^t:null===n||n&t?e|t:e}function me(e){return kr(e)||yr(e)||or(e)}function ve(e,t){if(null!=t)e.__key=t;else{Hn(),99<Gn&&L(14),t=Un();var n=Jn(),r=\"\"+de++;n._nodeMap.set(r,e),sr(e)?t._dirtyElements.set(r,!0):t._dirtyLeaves.add(r),t._cloneNotNeeded.add(r),t._dirtyType=1,e.__key=r}}function Ce(e){var t=e.getParent();if(null!==t){let i=e.getWritable();t=t.getWritable();var n=e.getPreviousSibling();if(e=e.getNextSibling(),null===n)if(null!==e){var r=e.getWritable();t.__first=e.__key,r.__prev=null}else t.__first=null;else{if(r=n.getWritable(),null!==e){let t=e.getWritable();t.__prev=r.__key,r.__next=t.__key}else r.__next=null;i.__prev=null}null===e?null!==n?(e=n.getWritable(),t.__last=n.__key,e.__next=null):t.__last=null:(e=e.getWritable(),null!==n?((n=n.getWritable()).__next=e.__key,e.__prev=n.__key):e.__prev=null,i.__next=null),t.__size--,i.__parent=null}}function Ne(e){99<Gn&&L(14);var t=e.getLatest(),n=t.__parent,r=Jn();let i=Un(),o=r._nodeMap;if(r=i._dirtyElements,null!==n)e:for(;null!==n&&!r.has(n);){let e=o.get(n);if(void 0===e)break;r.set(n,!1),n=e.__parent}t=t.__key,i._dirtyType=1,sr(e)?r.set(t,!0):i._dirtyLeaves.add(t)}function Te(e){Hn();var t=Un();let n=t._compositionKey;e!==n&&(t._compositionKey=e,null!==n&&(null!==(t=Se(n))&&t.getWritable()),null!==e&&(null!==(e=Se(e))&&e.getWritable()))}function xe(){return Yn()?null:Un()._compositionKey}function Se(e,t){return void 0===(e=(t||Jn())._nodeMap.get(e))?null:e}function Ee(e,t){return void 0!==(e=e[`__lexicalKey_${Un()._key}`])?Se(e,t):null}function be(e,t){for(;null!=e;){let n=Ee(e,t);if(null!==n)return n;e=je(e)}return null}function Oe(e){let t=Object.assign({},e._decorators);return e._pendingDecorators=t}function we(e){return e.read((()=>De().getTextContent()))}function De(){return Jn()._nodeMap.get(\"root\")}function Ae(e){Hn();let t=Jn();null!==e&&(e.dirty=!0,e._cachedNodes=null),t._selection=e}function ke(e){var t,n=Un();e:{for(t=e;null!=t;){let e=t[`__lexicalKey_${n._key}`];if(void 0!==e){t=e;break e}t=je(t)}t=null}return null===t?e===(n=n.getRootElement())?Se(\"root\"):null:Se(t)}function Pe(e){return/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g.test(e)}function Me(e){let t=[];for(;null!==e;)t.push(e),e=e._parentEditor;return t}function Re(){return Math.random().toString(36).replace(/[^a-z]+/g,\"\").substr(0,5)}function $e(e,t,n){if(null!==(t=et(t._window))){var r=t.anchorNode,{anchorOffset:i,focusOffset:o}=t;if(null!==r&&(t=3===r.nodeType?r.nodeValue:null,r=be(r),null!==t&&kr(r))){if(r.canContainTabs()){var l=t.includes(\"\\t\");if(n&&0<n.length&&l){let e=i+(l=n.length)-1,r=t.slice(0,e);t=`${r}${n}${t=t.slice(e,t.length)}`,i+=l,o+=l}}t===J&&n&&(t=n,o=i=l=n.length),null!==t&&Ie(r,t,i,o,e)}}}function Ie(e,t,n,r,i){let o=e;if(o.isAttached()&&(i||!o.isDirty())){var l=o.isComposing();if(e=t,(l||i)&&t[t.length-1]===J&&(e=t.slice(0,-1)),t=o.getTextContent(),i||e!==t)if(\"\"===e)if(Te(null),G||j||H)o.remove();else{let e=Un();setTimeout((()=>{e.update((()=>{o.isAttached()&&o.remove()}))}),20)}else{i=o.getParent(),t=Mn();var s=xe(),a=o.getKey();o.isToken()||null!==s&&a===s&&!l||null!==i&&pn(t)&&!i.canInsertTextBefore()&&0===t.anchor.offset?o.markDirty():(pn(l=Pn())&&null!==n&&null!==r&&(l.setTextNodeRange(o,n,o,r),o.isSegmented()&&(n=Ar(n=o.getTextContent()),o.replace(n),o=n)),o.setTextContent(e))}}}function Le(e,t){var n=e[t];return\"string\"==typeof n?(n=n.split(\" \"),e[t]=n):n}function Fe(e,t,n,r,i){0!==n.size&&(n=r.__key,void 0===(t=t.get(r.__type))&&L(33),r=t.klass,void 0===(t=e.get(r))&&(t=new Map,e.set(r,t)),r=\"destroyed\"===(e=t.get(n))&&\"created\"===i,(void 0===e||r)&&t.set(n,r?\"updated\":i))}function Be(e,t,n){let r=e.getParent(),i=n;return null!==r&&(t&&0===n?(i=e.getIndexWithinParent(),e=r):t||n!==e.getChildrenSize()||(i=e.getIndexWithinParent()+1,e=r)),e.getChildAtIndex(t?i-1:i)}function We(e,t){var n=e.offset;return\"element\"===e.type?Be(e=e.getNode(),t,n):(e=e.getNode(),t&&0===n||!t&&n===e.getTextContentSize()?null===(n=t?e.getPreviousSibling():e.getNextSibling())?Be(e.getParentOrThrow(),t,e.getIndexWithinParent()+(t?0:1)):n:null)}function Ke(e){return\"insertFromPaste\"===(e=(e=He(e).event)&&e.inputType)||\"insertFromPasteAsQuotation\"===e}function ze(e){return!dr(e)&&!e.isLastChild()&&!e.isInline()}function Ge(e,t){return void 0===(e=e._keyToDOMMap.get(t))&&L(75),e}function je(e){return null!==(e=e.assignedSlot||e.parentElement)&&11===e.nodeType?e.host:e}function Ye(e,t){for(e=e.getParent();null!==e;){if(e.is(t))return!0;e=e.getParent()}return!1}function He(e){return null===(e=e._window)&&L(78),e}function Je(e){for(e=e.getParentOrThrow();null!==e&&!Ue(e);)e=e.getParentOrThrow();return e}function Ue(e){return dr(e)||sr(e)&&e.isShadowRoot()}function Ve(e){return ve(e=e.constructor.clone(e),null),e}function Xe(e){var t=Un();let n=e.constructor.getType();return void 0===(t=t._nodes.get(n))&&L(97),null!==(t=t.replace)?((t=t(e))instanceof e.constructor||L(98),t):e}function qe(e,t){!dr(e=e.getParent())||sr(t)||or(t)||L(99)}function Qe(e){return(or(e)||sr(e)&&!e.canBeEmpty())&&!e.isInline()}function Ze(e,t,n){n.style.removeProperty(\"caret-color\"),t._blockCursorElement=null,null!==(t=e.parentElement)&&t.removeChild(e)}function et(e){return F?(e||window).getSelection():null}function tt(e,t){let n=e.getChildAtIndex(t);null==n&&(n=e),Ue(e)&&L(102);let r=e=>{const t=e.getParentOrThrow(),i=Ue(t),o=e!==n||i?Ve(e):e;if(i)return e.insertAfter(o),[e,o,o];const[l,s,a]=r(t);return e=e.getNextSiblings(),a.append(o,...e),[l,s,o]},[i,o]=r(n);return[i,o]}function nt(e,t){for(;e!==De()&&null!=e;){if(t(e))return e;e=e.getParent()}return null}function rt(e){let t=[],n=[e];for(;0<n.length;){let r=n.pop();void 0===r&&L(112),sr(r)&&n.unshift(...r.getChildren()),r!==e&&t.push(r)}return t}function it(e,t,n,r,i){for(e=e.getFirstChild();null!==e;){let o=e.__key;void 0!==e&&e.__parent===t&&(sr(e)&&it(e,o,n,r,i),n.has(o)||i.delete(o),r.delete(o)),e=e.isAttached()?e.getNextSibling():null}}function ot(e,t){let n=e.__mode,r=e.__format;e=e.__style;let i=t.__mode,o=t.__format;return t=t.__style,!(null!==n&&n!==i||null!==r&&r!==o||null!==e&&e!==t)}function lt(e,t){let n=e.mergeWithSibling(t),r=Un()._normalizedNodes;return r.add(e.__key),r.add(t.__key),n}function st(e){if(\"\"===e.__text&&e.isSimpleText()&&!e.isUnmergeable())e.remove();else{for(var t;null!==(t=e.getPreviousSibling())&&kr(t)&&t.isSimpleText()&&!t.isUnmergeable();){if(\"\"!==t.__text){ot(t,e)&&(e=lt(t,e));break}t.remove()}for(var n;null!==(n=e.getNextSibling())&&kr(n)&&n.isSimpleText()&&!n.isUnmergeable();){if(\"\"!==n.__text){ot(e,n)&&lt(e,n);break}n.remove()}}}function at(e){return ut(e.anchor),ut(e.focus),e}function ut(e){for(;\"element\"===e.type;){var t=e.getNode(),n=e.offset;if(n===t.getChildrenSize()?(t=t.getChildAtIndex(n-1),n=!0):(t=t.getChildAtIndex(n),n=!1),kr(t)){e.set(t.__key,n?t.getTextContentSize():0,\"text\");break}if(!sr(t))break;e.set(t.__key,n?t.getChildrenSize():0,\"element\")}}let dt,ct,ft,ht,gt,_t,pt,yt,mt,vt,Ct=\"\",Nt=\"\",Tt=\"\",xt=!1,St=!1,Et=null;function bt(e,t){let n=pt.get(e);if(null!==t){let n=Wt(e);n.parentNode===t&&t.removeChild(n)}yt.has(e)||ct._keyToDOMMap.delete(e),sr(n)&&Ot(e=It(n,pt),0,e.length-1,null),void 0!==n&&Fe(vt,ft,ht,n,\"destroyed\")}function Ot(e,t,n,r){for(;t<=n;++t){let n=e[t];void 0!==n&&bt(n,r)}}function wt(e,t){e.setProperty(\"text-align\",t)}function Dt(e,t){var n=dt.theme.indent;if(\"string\"==typeof n){let r=e.classList.contains(n);0<t&&!r?e.classList.add(n):1>t&&r&&e.classList.remove(n)}n=getComputedStyle(e).getPropertyValue(\"--lexical-indent-base-value\")||\"40px\",e.style.setProperty(\"padding-inline-start\",0===t?\"\":`calc(${t} * ${n})`)}function At(e,t){e=e.style,0===t?wt(e,\"\"):1===t?wt(e,\"left\"):2===t?wt(e,\"center\"):3===t?wt(e,\"right\"):4===t?wt(e,\"justify\"):5===t?wt(e,\"start\"):6===t&&wt(e,\"end\")}function kt(e,t,n){let r=yt.get(e);void 0===r&&L(60);let i=r.createDOM(dt,ct);var o=ct._keyToDOMMap;if(i[\"__lexicalKey_\"+ct._key]=e,o.set(e,i),kr(r)?i.setAttribute(\"data-lexical-text\",\"true\"):or(r)&&i.setAttribute(\"data-lexical-decorator\",\"true\"),sr(r)){if(e=r.__indent,o=r.__size,0!==e&&Dt(i,e),0!==o){--o,e=It(r,yt);var l=Nt;Nt=\"\",Pt(e,r,0,o,i,null),$t(r,i),Nt=l}0!==(e=r.__format)&&At(i,e),r.isInline()||Rt(null,r,i),ze(r)&&(Ct+=\"\\n\\n\",Tt+=\"\\n\\n\")}else o=r.getTextContent(),or(r)?(null!==(l=r.decorate(ct,dt))&&Ft(e,l),i.contentEditable=\"false\"):kr(r)&&(r.isDirectionless()||(Nt+=o)),Ct+=o,Tt+=o;return null!==t&&(null!=n?t.insertBefore(i,n):null!=(n=t.__lexicalLineBreak)?t.insertBefore(i,n):t.appendChild(i)),Fe(vt,ft,ht,r,\"created\"),i}function Pt(e,t,n,r,i,o){let l=Ct;for(Ct=\"\";n<=r;++n)kt(e[n],i,o);ze(t)&&(Ct+=\"\\n\\n\"),i.__lexicalTextContent=Ct,Ct=l+Ct}function Mt(e,t){return yr(e=t.get(e))||or(e)&&e.isInline()}function Rt(e,t,n){e=null!==e&&(0===e.__size||Mt(e.__last,pt)),t=0===t.__size||Mt(t.__last,yt),e?t||(null!=(t=n.__lexicalLineBreak)&&n.removeChild(t),n.__lexicalLineBreak=null):t&&(t=document.createElement(\"br\"),n.__lexicalLineBreak=t,n.appendChild(t))}function $t(e,t){var n=t.__lexicalDir;if(t.__lexicalDirTextContent!==Nt||n!==Et){let o=\"\"===Nt;if(o)var r=Et;else r=Nt,r=V.test(r)?\"rtl\":X.test(r)?\"ltr\":null;if(r!==n){let l=t.classList,s=dt.theme;var i=null!==n?s[n]:void 0;let a=null!==r?s[r]:void 0;void 0!==i&&(\"string\"==typeof i&&(i=i.split(\" \"),i=s[n]=i),l.remove(...i)),null===r||o&&\"ltr\"===r?t.removeAttribute(\"dir\"):(void 0!==a&&(\"string\"==typeof a&&(n=a.split(\" \"),a=s[r]=n),void 0!==a&&l.add(...a)),t.dir=r),St||(e.getWritable().__dir=r)}Et=r,t.__lexicalDirTextContent=Nt,t.__lexicalDir=r}}function It(e,t){let n=[];for(e=e.__first;null!==e;){let r=t.get(e);void 0===r&&L(101),n.push(e),e=r.__next}return n}function Lt(e,t){var n=pt.get(e),r=yt.get(e);void 0!==n&&void 0!==r||L(61);var i=xt||_t.has(e)||gt.has(e);let o=Ge(ct,e);if(n===r&&!i)return sr(n)?(void 0!==(r=o.__lexicalTextContent)&&(Ct+=r,Tt+=r),void 0!==(r=o.__lexicalDirTextContent)&&(Nt+=r)):(r=n.getTextContent(),kr(n)&&!n.isDirectionless()&&(Nt+=r),Tt+=r,Ct+=r),o;if(n!==r&&i&&Fe(vt,ft,ht,r,\"updated\"),r.updateDOM(n,o,dt))return r=kt(e,null,null),null===t&&L(62),t.replaceChild(r,o),bt(e,null),r;if(sr(n)&&sr(r)){if((e=r.__indent)!==n.__indent&&Dt(o,e),(e=r.__format)!==n.__format&&At(o,e),i){e=r,i=Nt,Nt=\"\",t=Ct;var l=n.__size,s=e.__size;if(Ct=\"\",1===l&&1===s){var a=n.__first,u=e.__first;if(a===u)Lt(a,o);else{var d=Wt(a);u=kt(u,null,null),o.replaceChild(u,d),bt(a,null)}}else{u=It(n,pt);var c=It(e,yt);if(0===l)0!==s&&Pt(c,e,0,s-1,o,null);else if(0===s)0!==l&&(Ot(u,0,l-1,(a=null==o.__lexicalLineBreak)?null:o),a&&(o.textContent=\"\"));else{var f=u;u=c,c=l-1,l=s-1;let t=o.firstChild,n=0;for(s=0;n<=c&&s<=l;){var h=f[n];let e=u[s];if(h===e)t=Bt(Lt(e,o)),n++,s++;else{void 0===a&&(a=new Set(f)),void 0===d&&(d=new Set(u));let r=d.has(h),i=a.has(e);r?(i?((h=Ge(ct,e))===t?t=Bt(Lt(e,o)):(null!=t?o.insertBefore(h,t):o.appendChild(h),Lt(e,o)),n++):kt(e,o,t),s++):(t=Bt(Wt(h)),bt(h,o),n++)}}d=s>l,(a=n>c)&&!d?Pt(u,e,s,l,o,a=void 0===(a=u[l+1])?null:ct.getElementByKey(a)):d&&!a&&Ot(f,n,c,o)}}ze(e)&&(Ct+=\"\\n\\n\"),o.__lexicalTextContent=Ct,Ct=t+Ct,$t(e,o),Nt=i,dr(r)||r.isInline()||Rt(n,r,o)}ze(r)&&(Ct+=\"\\n\\n\",Tt+=\"\\n\\n\")}else n=r.getTextContent(),or(r)?null!==(i=r.decorate(ct,dt))&&Ft(e,i):kr(r)&&!r.isDirectionless()&&(Nt+=n),Ct+=n,Tt+=n;return!St&&dr(r)&&r.__cachedText!==Tt&&((r=r.getWritable()).__cachedText=Tt),o}function Ft(e,t){let n=ct._pendingDecorators,r=ct._decorators;if(null===n){if(r[e]===t)return;n=Oe(ct)}n[e]=t}function Bt(e){return null!==(e=e.nextSibling)&&e===ct._blockCursorElement&&(e=e.nextSibling),e}function Wt(e){return void 0===(e=mt.get(e))&&L(75),e}let Kt=Object.freeze({}),zt=[[\"keydown\",function(e,t){if(Gt=e.timeStamp,jt=e.keyCode,!t.isComposing()){var{keyCode:n,shiftKey:r,ctrlKey:l,metaKey:s,altKey:a}=e;if(!er(t,_,e)){if(39!==n||l||s||a)if(39!==n||a||r||!l&&!s)if(37!==n||l||s||a)if(37!==n||a||r||!l&&!s)if(38!==n||l||s)if(40!==n||l||s)if(13===n&&r)Xt=!0,er(t,T,e);else if(32===n)er(t,x,e);else if(W&&l&&79===n)e.preventDefault(),Xt=!0,er(t,o,!0);else if(13!==n||r){var u=W?!a&&!s&&(8===n||72===n&&l):!(l||a||s)&&8===n;u?8===n?er(t,S,e):(e.preventDefault(),er(t,i,!0)):27===n?er(t,E,e):(u=W?!(r||a||s)&&(46===n||68===n&&l):!(l||a||s)&&46===n)?46===n?er(t,b,e):(e.preventDefault(),er(t,i,!1)):8===n&&(W?a:l)?(e.preventDefault(),er(t,d,!0)):46===n&&(W?a:l)?(e.preventDefault(),er(t,d,!1)):W&&s&&8===n?(e.preventDefault(),er(t,c,!0)):W&&s&&46===n?(e.preventDefault(),er(t,c,!1)):66===n&&!a&&(W?s:l)?(e.preventDefault(),er(t,f,\"bold\")):85===n&&!a&&(W?s:l)?(e.preventDefault(),er(t,f,\"underline\")):73===n&&!a&&(W?s:l)?(e.preventDefault(),er(t,f,\"italic\")):9!==n||a||l||s?90===n&&!r&&(W?s:l)?(e.preventDefault(),er(t,h,void 0)):(u=W?90===n&&s&&r:89===n&&l||90===n&&l&&r)?(e.preventDefault(),er(t,g,void 0)):Cn(t._editorState._selection)&&((u=!r&&(67===n&&(W?s:l)))?(e.preventDefault(),er(t,P,e)):(u=!r&&(88===n&&(W?s:l)))&&(e.preventDefault(),er(t,M,e))):er(t,O,e)}else Xt=!1,er(t,T,e);else er(t,N,e);else er(t,C,e);else er(t,v,e);else er(t,m,e);else er(t,y,e);else er(t,p,e);(l||r||a||s)&&er(t,I,e)}}}],[\"pointerdown\",function(e,t){let n=e.target;e=e.pointerType,n instanceof Node&&\"touch\"!==e&&rr(t,(()=>{or(be(n))||(Vt=!0)}))}],[\"compositionstart\",function(e,t){rr(t,(()=>{let n=Pn();if(pn(n)&&!t.isComposing()){let r=n.anchor,i=n.anchor.getNode();Te(r.key),(e.timeStamp<Gt+30||\"element\"===r.type||!n.isCollapsed()||i.getFormat()!==n.format||i.getStyle()!==n.style)&&er(t,s,U)}}))}],[\"compositionend\",function(e,t){K?qt=!0:rr(t,(()=>{rn(t,e.data)}))}],[\"input\",function(e,t){e.stopPropagation(),rr(t,(()=>{var n=Pn(),r=e.data,i=nn(e);if(null!=r&&pn(n)&&Zt(n,i,r,e.timeStamp,!1)){qt&&(rn(t,r),qt=!1);var o=n.anchor,l=o.getNode();if(null===(i=et(t._window)))return;let a=o.offset;(o=z&&!n.isCollapsed()&&kr(l)&&null!==i.anchorNode)&&(o=(l=l.getTextContent().slice(0,a)+r+l.getTextContent().slice(a+n.focus.offset))===(3===(i=i.anchorNode).nodeType?i.nodeValue:null)),o||er(t,s,r),r=r.length,K&&1<r&&\"insertCompositionText\"===e.inputType&&!t.isComposing()&&(n.anchor.offset-=r),G||j||H||!t.isComposing()||(Gt=0,Te(null))}else $e(!1,t,null!==r?r:void 0),qt&&(rn(t,r||void 0),qt=!1);Hn(),ae(n=Un())})),Ht=null}],[\"click\",function(e,t){rr(t,(()=>{let n=Pn(),i=et(t._window),o=Mn();if(pn(n)){let e=n.anchor,t=e.getNode();i&&\"element\"===e.type&&0===e.offset&&n.isCollapsed()&&!dr(t)&&1===De().getChildrenSize()&&t.getTopLevelElementOrThrow().isEmpty()&&null!==o&&n.is(o)&&(i.removeAllRanges(),n.dirty=!0)}er(t,r,e)}))}],[\"cut\",Kt],[\"copy\",Kt],[\"dragstart\",Kt],[\"dragover\",Kt],[\"dragend\",Kt],[\"paste\",Kt],[\"focus\",Kt],[\"blur\",Kt],[\"drop\",Kt]];z&&zt.push([\"beforeinput\",(e,t)=>function(e,t){let n=e.inputType,r=nn(e);\"deleteCompositionText\"===n||K&&Ke(t)||\"insertCompositionText\"!==n&&rr(t,(()=>{let _=Pn();if(\"deleteContentBackward\"===n){if(null===_){var p=Mn();if(!pn(p))return;Ae(p.clone())}if(pn(_))return void(229===jt&&e.timeStamp<Gt+30&&t.isComposing()&&_.anchor.key===_.focus.key?(Te(null),Gt=0,setTimeout((()=>{rr(t,(()=>{Te(null)}))}),30),pn(_)&&(p=_.anchor.getNode(),p.markDirty(),_.format=p.getFormat(),_.style=p.getStyle())):(e.preventDefault(),er(t,i,!0)))}if(pn(_)){p=e.data,null!==Ht&&$e(!1,t,Ht),_.dirty&&null===Ht||!_.isCollapsed()||dr(_.anchor.getNode())||null===r||_.applyDOMRange(r),Ht=null;var y=_.focus,m=_.anchor.getNode();if(y=y.getNode(),\"insertText\"===n||\"insertTranspose\"===n)\"\\n\"===p?(e.preventDefault(),er(t,o,!1)):\"\\n\\n\"===p?(e.preventDefault(),er(t,l,void 0)):null==p&&e.dataTransfer?(p=e.dataTransfer.getData(\"text/plain\"),e.preventDefault(),_.insertRawText(p)):null!=p&&Zt(_,r,p,e.timeStamp,!0)?(e.preventDefault(),er(t,s,p)):Ht=p,Yt=e.timeStamp;else switch(e.preventDefault(),n){case\"insertFromYank\":case\"insertFromDrop\":case\"insertReplacementText\":er(t,s,e);break;case\"insertFromComposition\":Te(null),er(t,s,e);break;case\"insertLineBreak\":Te(null),er(t,o,!1);break;case\"insertParagraph\":Te(null),Xt?(Xt=!1,er(t,o,!1)):er(t,l,void 0);break;case\"insertFromPaste\":case\"insertFromPasteAsQuotation\":er(t,a,e);break;case\"deleteByComposition\":(function(e,t){return e!==t||sr(e)||sr(t)||!e.isToken()||!t.isToken()})(m,y)&&er(t,u,void 0);break;case\"deleteByDrag\":case\"deleteByCut\":er(t,u,void 0);break;case\"deleteContent\":er(t,i,!1);break;case\"deleteWordBackward\":er(t,d,!0);break;case\"deleteWordForward\":er(t,d,!1);break;case\"deleteHardLineBackward\":case\"deleteSoftLineBackward\":er(t,c,!0);break;case\"deleteContentForward\":case\"deleteHardLineForward\":case\"deleteSoftLineForward\":er(t,c,!1);break;case\"formatStrikeThrough\":er(t,f,\"strikethrough\");break;case\"formatBold\":er(t,f,\"bold\");break;case\"formatItalic\":er(t,f,\"italic\");break;case\"formatUnderline\":er(t,f,\"underline\");break;case\"historyUndo\":er(t,h,void 0);break;case\"historyRedo\":er(t,g,void 0)}}}))}(e,t)]);let Gt=0,jt=0,Yt=0,Ht=null,Jt=0,Ut=!1,Vt=!1,Xt=!1,qt=!1,Qt=[0,\"\",0,\"root\",0];function Zt(e,t,n,r,i){let o=e.anchor,l=e.focus,s=o.getNode();var a=Un();let u=et(a._window),d=null!==u?u.anchorNode:null,c=o.key;a=a.getElementByKey(c);let f=n.length;return c!==l.key||!kr(s)||(!i&&(!z||Yt<r+50)||s.isDirty()&&2>f||Pe(n))&&o.offset!==l.offset&&!s.isComposing()||_e(s)||s.isDirty()&&1<f||(i||!z)&&null!==a&&!s.isComposing()&&d!==pe(a)||null!==u&&null!==t&&(!t.collapsed||t.startContainer!==u.anchorNode||t.startOffset!==u.anchorOffset)||s.getFormat()!==e.format||s.getStyle()!==e.style||function(e,t){if(t.isSegmented())return!0;if(!e.isCollapsed())return!1;e=e.anchor.offset;let n=t.getParentOrThrow(),r=t.isToken();return 0===e?((e=!t.canInsertTextBefore()||!n.canInsertTextBefore()||r)||(e=(kr(t=t.getPreviousSibling())||sr(t)&&t.isInline())&&!t.canInsertTextAfter()),e):e===t.getTextContentSize()&&(!t.canInsertTextAfter()||!n.canInsertTextAfter()||r)}(e,s)}function en(e,t){return null!==e&&null!==e.nodeValue&&3===e.nodeType&&0!==t&&t!==e.nodeValue.length}function tn(e,t,r){let{anchorNode:i,anchorOffset:o,focusNode:l,focusOffset:s}=e;Ut&&(Ut=!1,en(i,o)&&en(l,s))||rr(t,(()=>{if(r){if(he(t,i,l)){var o=Pn();if(pn(o)){var s=o.anchor,a=s.getNode();if(o.isCollapsed()){\"Range\"===e.type&&e.anchorNode===e.focusNode&&(o.dirty=!0);var u=He(t).event;u=u?u.timeStamp:performance.now();let[n,r,i,l,d]=Qt;u<d+200&&s.offset===i&&s.key===l?(o.format=n,o.style=r):\"text\"===s.type?(o.format=a.getFormat(),o.style=a.getStyle()):\"element\"===s.type&&(o.format=0,o.style=\"\")}else{s=255,a=!1;let e=(u=o.getNodes()).length;for(let t=0;t<e;t++){let e=u[t];if(kr(e)&&(a=!0,0===(s&=e.getFormat())))break}o.format=a?s:0}}er(t,n,void 0)}}else Ae(null)}))}function nn(e){return e.getTargetRanges?0===(e=e.getTargetRanges()).length?null:e[0]:null}function rn(e,t){var n=e._compositionKey;if(Te(null),null!==n&&null!=t){if(\"\"===t)return t=Se(n),void(null!==(e=pe(e.getElementByKey(n)))&&null!==e.nodeValue&&kr(t)&&Ie(t,e.nodeValue,null,null,!0));if(\"\\n\"===t[t.length-1]&&pn(n=Pn()))return t=n.focus,n.anchor.set(t.key,t.offset,t.type),void er(e,T,null)}$e(!0,e,t)}function on(e){let t=e.__lexicalEventHandles;return void 0===t&&(t=[],e.__lexicalEventHandles=t),t}let ln=new Map;function sn(e){let t=et(null==(e=e.target)?null:9===e.nodeType?e.defaultView:e.ownerDocument.defaultView);if(null!==t){var n=ge(t.anchorNode);if(null!==n){Vt&&(Vt=!1,rr(n,(()=>{var e=Mn(),r=t.anchorNode;null!==r&&(1===(r=r.nodeType)||3===r)&&Ae(e=kn(e,t,n))})));var r=(e=(e=Me(n))[e.length-1])._key,i=ln.get(r),o=i||e;o!==n&&tn(t,o,!1),tn(t,n,!0),n!==e?ln.set(r,n):i&&ln.delete(r)}}}function an(e,t,n){Hn();var r=e.__key;let i=e.getParent();if(null!==i){var o=function(e,t=0){if(0!==t&&L(1),!pn(t=Pn())||!sr(e))return t;let{anchor:n,focus:r}=t,i=n.getNode(),o=r.getNode();return Ye(i,e)&&n.set(e.__key,0,\"element\"),Ye(o,e)&&r.set(e.__key,0,\"element\"),t}(e),l=!1;if(pn(o)&&t){let t=o.anchor,n=o.focus;t.key===r&&(In(t,e,i,e.getPreviousSibling(),e.getNextSibling()),l=!0),n.key===r&&(In(n,e,i,e.getPreviousSibling(),e.getNextSibling()),l=!0)}pn(o)&&t&&!l?(r=e.getIndexWithinParent(),Ce(e),Rn(o,i,r,-1)):Ce(e),n||Ue(i)||i.canBeEmpty()||!i.isEmpty()||an(i,t),t&&dr(i)&&i.isEmpty()&&i.selectEnd()}}class un{static getType(){L(64)}static clone(){L(65)}constructor(e){this.__type=this.constructor.getType(),this.__next=this.__prev=this.__parent=null,ve(this,e)}getType(){return this.__type}isAttached(){for(var e=this.__key;null!==e;){if(\"root\"===e)return!0;if(null===(e=Se(e)))break;e=e.__parent}return!1}isSelected(e){if(null==(e=e||Pn()))return!1;let t=e.getNodes().some((e=>e.__key===this.__key));return(kr(this)||!pn(e)||\"element\"!==e.anchor.type||\"element\"!==e.focus.type||e.anchor.key!==e.focus.key||e.anchor.offset!==e.focus.offset)&&t}getKey(){return this.__key}getIndexWithinParent(){var e=this.getParent();if(null===e)return-1;e=e.getFirstChild();let t=0;for(;null!==e;){if(this.is(e))return t;t++,e=e.getNextSibling()}return-1}getParent(){let e=this.getLatest().__parent;return null===e?null:Se(e)}getParentOrThrow(){let e=this.getParent();return null===e&&L(66),e}getTopLevelElement(){let e=this;for(;null!==e;){let t=e.getParent();if(Ue(t))return e;e=t}return null}getTopLevelElementOrThrow(){let e=this.getTopLevelElement();return null===e&&L(67),e}getParents(){let e=[],t=this.getParent();for(;null!==t;)e.push(t),t=t.getParent();return e}getParentKeys(){let e=[],t=this.getParent();for(;null!==t;)e.push(t.__key),t=t.getParent();return e}getPreviousSibling(){let e=this.getLatest().__prev;return null===e?null:Se(e)}getPreviousSiblings(){let e=[];var t=this.getParent();if(null===t)return e;for(t=t.getFirstChild();null!==t&&!t.is(this);)e.push(t),t=t.getNextSibling();return e}getNextSibling(){let e=this.getLatest().__next;return null===e?null:Se(e)}getNextSiblings(){let e=[],t=this.getNextSibling();for(;null!==t;)e.push(t),t=t.getNextSibling();return e}getCommonAncestor(e){let t=this.getParents();var n=e.getParents();sr(this)&&t.unshift(this),sr(e)&&n.unshift(e),e=t.length;var r=n.length;if(0===e||0===r||t[e-1]!==n[r-1])return null;for(n=new Set(n),r=0;r<e;r++){let e=t[r];if(n.has(e))return e}return null}is(e){return null!=e&&this.__key===e.__key}isBefore(e){if(this===e)return!1;if(e.isParentOf(this))return!0;if(this.isParentOf(e))return!1;var t=this.getCommonAncestor(e);let n=this;for(;;){var r=n.getParentOrThrow();if(r===t){r=n.getIndexWithinParent();break}n=r}for(n=e;;){if((e=n.getParentOrThrow())===t){t=n.getIndexWithinParent();break}n=e}return r<t}isParentOf(e){let t=this.__key;if(t===e.__key)return!1;for(;null!==e;){if(e.__key===t)return!0;e=e.getParent()}return!1}getNodesBetween(e){let t=this.isBefore(e),n=[],r=new Set;for(var i=this;;){var o=i.__key;if(r.has(o)||(r.add(o),n.push(i)),i===e)break;if(null!==(o=sr(i)?t?i.getFirstChild():i.getLastChild():null))i=o;else if(null!==(o=t?i.getNextSibling():i.getPreviousSibling()))i=o;else{if(i=i.getParentOrThrow(),r.has(i.__key)||n.push(i),i===e)break;o=i;do{null===o&&L(68),i=t?o.getNextSibling():o.getPreviousSibling(),null!==(o=o.getParent())&&(null!==i||r.has(o.__key)||n.push(o))}while(null===i)}}return t||n.reverse(),n}isDirty(){let e=Un()._dirtyLeaves;return null!==e&&e.has(this.__key)}getLatest(){let e=Se(this.__key);return null===e&&L(113),e}getWritable(){Hn();var e=Jn(),t=Un();e=e._nodeMap;let n=this.__key,r=this.getLatest(),i=r.__parent;t=t._cloneNotNeeded;var o=Pn();return null!==o&&(o._cachedNodes=null),t.has(n)?(Ne(r),r):((o=r.constructor.clone(r)).__parent=i,o.__next=r.__next,o.__prev=r.__prev,sr(r)&&sr(o)?(o.__first=r.__first,o.__last=r.__last,o.__size=r.__size,o.__indent=r.__indent,o.__format=r.__format,o.__dir=r.__dir):kr(r)&&kr(o)&&(o.__format=r.__format,o.__style=r.__style,o.__mode=r.__mode,o.__detail=r.__detail),t.add(n),o.__key=n,Ne(o),e.set(n,o),o)}getTextContent(){return\"\"}getTextContentSize(){return this.getTextContent().length}createDOM(){L(70)}updateDOM(){L(71)}exportDOM(e){return{element:this.createDOM(e._config,e)}}exportJSON(){L(72)}static importJSON(){L(18)}static transform(){return null}remove(e){an(this,!0,e)}replace(e,t){Hn();var n=Pn();null!==n&&(n=n.clone()),qe(this,e);let r=this.getLatest(),i=this.__key,o=e.__key,l=e.getWritable(),s=(e=this.getParentOrThrow().getWritable()).__size;Ce(l);let a=r.getPreviousSibling(),u=r.getNextSibling(),d=r.__prev,c=r.__next,f=r.__parent;return an(r,!1,!0),null===a?e.__first=o:a.getWritable().__next=o,l.__prev=d,null===u?e.__last=o:u.getWritable().__prev=o,l.__next=c,l.__parent=f,e.__size=s,t&&this.getChildren().forEach((e=>{l.append(e)})),pn(n)&&(Ae(n),t=n.anchor,n=n.focus,t.key===i&&fn(t,l),n.key===i&&fn(n,l)),xe()===i&&Te(o),l}insertAfter(e,t=!0){Hn(),qe(this,e);var n=this.getWritable();let r=e.getWritable();var i=r.getParent();let o=Pn();var l=!1,s=!1;if(null!==i){var a=e.getIndexWithinParent();Ce(r),pn(o)&&(s=i.__key,l=o.anchor,i=o.focus,l=\"element\"===l.type&&l.key===s&&l.offset===a+1,s=\"element\"===i.type&&i.key===s&&i.offset===a+1)}i=this.getNextSibling(),a=this.getParentOrThrow().getWritable();let u=r.__key,d=n.__next;return null===i?a.__last=u:i.getWritable().__prev=u,a.__size++,n.__next=u,r.__next=d,r.__prev=n.__key,r.__parent=n.__parent,t&&pn(o)&&(Rn(o,a,(t=this.getIndexWithinParent())+1),n=a.__key,l&&o.anchor.set(n,t+2,\"element\"),s&&o.focus.set(n,t+2,\"element\")),e}insertBefore(e,t=!0){Hn(),qe(this,e);var n=this.getWritable();let r=e.getWritable(),i=r.__key;Ce(r);let o=this.getPreviousSibling(),l=this.getParentOrThrow().getWritable(),s=n.__prev,a=this.getIndexWithinParent();return null===o?l.__first=i:o.getWritable().__next=i,l.__size++,n.__prev=i,r.__prev=s,r.__next=n.__key,r.__parent=n.__parent,n=Pn(),t&&pn(n)&&Rn(n,t=this.getParentOrThrow(),a),e}isParentRequired(){return!1}createParentElementNode(){return Rr()}selectPrevious(e,t){Hn();let n=this.getPreviousSibling(),r=this.getParentOrThrow();return null===n?r.select(0,0):sr(n)?n.select():kr(n)?n.select(e,t):(e=n.getIndexWithinParent()+1,r.select(e,e))}selectNext(e,t){Hn();let n=this.getNextSibling(),r=this.getParentOrThrow();return null===n?r.select():sr(n)?n.select(0,0):kr(n)?n.select(e,t):(e=n.getIndexWithinParent(),r.select(e,e))}markDirty(){this.getWritable()}}class dn{constructor(e,t,n){this._selection=null,this.key=e,this.offset=t,this.type=n}is(e){return this.key===e.key&&this.offset===e.offset&&this.type===e.type}isBefore(e){let t=this.getNode(),n=e.getNode(),r=this.offset;if(e=e.offset,sr(t)){var i=t.getDescendantByIndex(r);t=null!=i?i:t}return sr(n)&&(i=n.getDescendantByIndex(e),n=null!=i?i:n),t===n?r<e:t.isBefore(n)}getNode(){let e=Se(this.key);return null===e&&L(20),e}set(e,t,n){let r=this._selection,i=this.key;this.key=e,this.offset=t,this.type=n,Yn()||(xe()===i&&Te(e),null!==r&&(r._cachedNodes=null,r.dirty=!0))}}function cn(e,t){let n=t.__key,r=e.offset,i=\"element\";if(kr(t))i=\"text\",r>(t=t.getTextContentSize())&&(r=t);else if(!sr(t)){var o=t.getNextSibling();kr(o)?(n=o.__key,r=0,i=\"text\"):(o=t.getParent())&&(n=o.__key,r=t.getIndexWithinParent()+1)}e.set(n,r,i)}function fn(e,t){if(sr(t)){let n=t.getLastDescendant();sr(n)||kr(n)?cn(e,n):cn(e,t)}else cn(e,t)}function hn(e,t,n,r){let i=e.getNode(),o=i.getChildAtIndex(e.offset),l=Ar(),s=dr(i)?Rr().append(l):l;l.setFormat(n),l.setStyle(r),null===o?i.append(s):o.insertBefore(s),e.is(t)&&t.set(l.__key,0,\"text\"),e.set(l.__key,0,\"text\")}function gn(e,t,n,r){e.key=t,e.offset=n,e.type=r}class _n{constructor(e){this.dirty=!1,this._nodes=e,this._cachedNodes=null}is(e){if(!Cn(e))return!1;let t=this._nodes,n=e._nodes;return t.size===n.size&&Array.from(t).every((e=>n.has(e)))}add(e){this.dirty=!0,this._nodes.add(e),this._cachedNodes=null}delete(e){this.dirty=!0,this._nodes.delete(e),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(e){return this._nodes.has(e)}clone(){return new _n(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(){}insertText(){}insertNodes(e,t){let n=this.getNodes(),r=n.length;var i=n[r-1];if(kr(i))i=i.select();else{let e=i.getIndexWithinParent()+1;i=i.getParentOrThrow().select(e,e)}for(i.insertNodes(e,t),e=0;e<r;e++)n[e].remove();return!0}getNodes(){var e=this._cachedNodes;if(null!==e)return e;var t=this._nodes;e=[];for(let n of t)null!==(t=Se(n))&&e.push(t);return Yn()||(this._cachedNodes=e),e}getTextContent(){let e=this.getNodes(),t=\"\";for(let n=0;n<e.length;n++)t+=e[n].getTextContent();return t}}function pn(e){return e instanceof vn}class yn{constructor(e,t,n){this.gridKey=e,this.anchor=t,this.focus=n,this.dirty=!1,this._cachedNodes=null,t._selection=this,n._selection=this}is(e){return!!mn(e)&&(this.gridKey===e.gridKey&&this.anchor.is(e.anchor)&&this.focus.is(e.focus))}set(e,t,n){this.dirty=!0,this.gridKey=e,this.anchor.key=t,this.focus.key=n,this._cachedNodes=null}clone(){return new yn(this.gridKey,this.anchor,this.focus)}isCollapsed(){return!1}isBackward(){return this.focus.isBefore(this.anchor)}getCharacterOffsets(){return Tn(this)}extract(){return this.getNodes()}insertRawText(){}insertText(){}insertNodes(e,t){let n=this.focus.getNode();return at(n.select(0,n.getChildrenSize())).insertNodes(e,t)}getShape(){var e=Se(this.anchor.key);null===e&&L(21);var t=e.getIndexWithinParent();e=e.getParentOrThrow().getIndexWithinParent();var n=Se(this.focus.key);null===n&&L(22);var r=n.getIndexWithinParent();let i=n.getParentOrThrow().getIndexWithinParent();return n=Math.min(t,r),t=Math.max(t,r),r=Math.min(e,i),e=Math.max(e,i),{fromX:Math.min(n,t),fromY:Math.min(r,e),toX:Math.max(n,t),toY:Math.max(r,e)}}getNodes(){function e(e){let{cell:t,startColumn:n,startRow:r}=e;s=Math.min(s,n),a=Math.min(a,r),u=Math.max(u,n+t.__colSpan-1),d=Math.max(d,r+t.__rowSpan-1)}var t=this._cachedNodes;if(null!==t)return t;var n=this.anchor.getNode();t=this.focus.getNode(),n=nt(n,Fr);var r=nt(t,Fr);Fr(n)||L(103),Fr(r)||L(104),zr(t=n.getParent())||L(105),Wr(t=t.getParent())||L(106);let[i,o,l]=Fn(t,n,r),s=Math.min(o.startColumn,l.startColumn),a=Math.min(o.startRow,l.startRow),u=Math.max(o.startColumn+o.cell.__colSpan-1,l.startColumn+l.cell.__colSpan-1),d=Math.max(o.startRow+o.cell.__rowSpan-1,l.startRow+l.cell.__rowSpan-1);n=s,r=a;for(var c=s,f=a;s<n||a<r||u>c||d>f;){if(s<n){var h=f-r;--n;for(var g=0;g<=h;g++)e(i[r+g][n])}if(a<r)for(h=c-n,--r,g=0;g<=h;g++)e(i[r][n+g]);if(u>c)for(h=f-r,c+=1,g=0;g<=h;g++)e(i[r+g][c]);if(d>f)for(h=c-n,f+=1,g=0;g<=h;g++)e(i[f][n+g])}for(t=[t],n=null,r=a;r<=d;r++)for(c=s;c<=u;c++)({cell:f}=i[r][c]),zr(h=f.getParent())||L(107),h!==n&&t.push(h),t.push(f,...rt(f)),n=h;return Yn()||(this._cachedNodes=t),t}getTextContent(){let e=this.getNodes(),t=\"\";for(let n=0;n<e.length;n++)t+=e[n].getTextContent();return t}}function mn(e){return e instanceof yn}class vn{constructor(e,t,n,r){this.anchor=e,this.focus=t,this.dirty=!1,this.format=n,this.style=r,this._cachedNodes=null,e._selection=this,t._selection=this}is(e){return!!pn(e)&&(this.anchor.is(e.anchor)&&this.focus.is(e.focus)&&this.format===e.format&&this.style===e.style)}isBackward(){return this.focus.isBefore(this.anchor)}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){var e=this._cachedNodes;if(null!==e)return e;e=this.anchor;var t=this.focus,n=e.isBefore(t),r=n?e:t;n=n?t:e,e=r.getNode(),t=n.getNode();let i=r.offset;return r=n.offset,sr(e)&&(n=e.getDescendantByIndex(i),e=null!=n?n:e),sr(t)&&(null!==(n=t.getDescendantByIndex(r))&&n!==e&&t.getChildAtIndex(r)===n&&(n=n.getPreviousSibling()),t=null!=n?n:t),e=e.is(t)?sr(e)&&0<e.getChildrenSize()?[]:[e]:e.getNodesBetween(t),Yn()||(this._cachedNodes=e),e}setTextNodeRange(e,t,n,r){gn(this.anchor,e.__key,t,\"text\"),gn(this.focus,n.__key,r,\"text\"),this._cachedNodes=null,this.dirty=!0}getTextContent(){let e=this.getNodes();if(0===e.length)return\"\";let t=e[0],n=e[e.length-1],r=this.anchor,i=this.focus,o=r.isBefore(i),[l,s]=Tn(this),a=\"\",u=!0;for(let d=0;d<e.length;d++){let c=e[d];if(sr(c)&&!c.isInline())u||(a+=\"\\n\"),u=!c.isEmpty();else if(u=!1,kr(c)){let e=c.getTextContent();c===t?c===n?\"element\"===r.type&&\"element\"===i.type&&i.offset!==r.offset||(e=l<s?e.slice(l,s):e.slice(s,l)):e=o?e.slice(l):e.slice(s):c===n&&(e=o?e.slice(0,s):e.slice(0,l)),a+=e}else!or(c)&&!yr(c)||c===n&&this.isCollapsed()||(a+=c.getTextContent())}return a}applyDOMRange(e){let t=Un(),n=t.getEditorState()._selection;if(null!==(e=On(e.startContainer,e.startOffset,e.endContainer,e.endOffset,t,n))){var[r,i]=e;gn(this.anchor,r.key,r.offset,r.type),gn(this.focus,i.key,i.offset,i.type),this._cachedNodes=null}}clone(){let e=this.anchor,t=this.focus;return new vn(new dn(e.key,e.offset,e.type),new dn(t.key,t.offset,t.type),this.format,this.style)}toggleFormat(e){this.format=ye(this.format,e,null),this.dirty=!0}setStyle(e){this.style=e,this.dirty=!0}hasFormat(e){return 0!=(this.format&q[e])}insertRawText(e){let t=e.split(/\\r?\\n/);if(1===t.length)this.insertText(e);else{e=[];let n=t.length;for(let r=0;r<n;r++){let i=t[r];\"\"!==i&&e.push(Ar(i)),r!==n-1&&e.push(pr())}this.insertNodes(e)}}insertText(e){var t=this.anchor,n=this.focus,r=this.isCollapsed()||t.isBefore(n),i=this.format,o=this.style;r&&\"element\"===t.type?hn(t,n,i,o):r||\"element\"!==n.type||hn(n,t,i,o);var l=this.getNodes(),s=l.length,a=r?n:t;n=(r?t:n).offset;var u=a.offset;kr(t=l[0])||L(26),r=t.getTextContent().length;var d=t.getParentOrThrow(),c=l[s-1];if(this.isCollapsed()&&n===r&&(t.isSegmented()||t.isToken()||!t.canInsertTextAfter()||!d.canInsertTextAfter()&&null===t.getNextSibling())){var f=t.getNextSibling();if(kr(f)&&!_e(f)||((f=Ar()).setFormat(i),d.canInsertTextAfter()?t.insertAfter(f):d.insertAfter(f)),f.select(0,0),t=f,\"\"!==e)return void this.insertText(e)}else if(this.isCollapsed()&&0===n&&(t.isSegmented()||t.isToken()||!t.canInsertTextBefore()||!d.canInsertTextBefore()&&null===t.getPreviousSibling())){if(kr(f=t.getPreviousSibling())&&!_e(f)||((f=Ar()).setFormat(i),d.canInsertTextBefore()?t.insertBefore(f):d.insertBefore(f)),f.select(),t=f,\"\"!==e)return void this.insertText(e)}else if(t.isSegmented()&&n!==r)(d=Ar(t.getTextContent())).setFormat(i),t.replace(d),t=d;else if(!(this.isCollapsed()||\"\"===e||(f=c.getParent(),d.canInsertTextBefore()&&d.canInsertTextAfter()&&(!sr(f)||f.canInsertTextBefore()&&f.canInsertTextAfter()))))return this.insertText(\"\"),bn(this.anchor,this.focus,null),void this.insertText(e);if(1===s)if(t.isToken())(e=Ar(e)).select(),t.replace(e);else{if(l=t.getFormat(),s=t.getStyle(),n===u&&(l!==i||s!==o)){if(\"\"!==t.getTextContent())return(l=Ar(e)).setFormat(i),l.setStyle(o),l.select(),0===n?t.insertBefore(l,!1):([s]=t.splitText(n),s.insertAfter(l,!1)),void(l.isComposing()&&\"text\"===this.anchor.type&&(this.anchor.offset-=e.length));t.setFormat(i),t.setStyle(o)}\"\"===(t=t.spliceText(n,u-n,e,!0)).getTextContent()?t.remove():\"text\"===this.anchor.type&&(t.isComposing()?this.anchor.offset-=e.length:(this.format=l,this.style=s))}else{if(i=new Set([...t.getParentKeys(),...c.getParentKeys()]),f=sr(t)?t:t.getParentOrThrow(),o=sr(c)?c:c.getParentOrThrow(),d=c,!f.is(o)&&o.isInline())do{d=o,o=o.getParentOrThrow()}while(o.isInline());\"text\"===a.type&&(0!==u||\"\"===c.getTextContent())||\"element\"===a.type&&c.getIndexWithinParent()<u?kr(c)&&!c.isToken()&&u!==c.getTextContentSize()?(c.isSegmented()&&(a=Ar(c.getTextContent()),c.replace(a),c=a),c=c.spliceText(0,u,\"\"),i.add(c.__key)):(a=c.getParentOrThrow()).canBeEmpty()||1!==a.getChildrenSize()?c.remove():a.remove():i.add(c.__key),a=o.getChildren(),u=new Set(l),c=f.is(o),f=f.isInline()&&null===t.getNextSibling()?f:t;for(let e=a.length-1;0<=e;e--){let n=a[e];if(n.is(t)||sr(n)&&n.isParentOf(t))break;n.isAttached()&&(!u.has(n)||n.is(d)?c||f.insertAfter(n,!1):n.remove())}if(!c)for(a=o,u=null;null!==a;)(0===(c=(o=a.getChildren()).length)||o[c-1].is(u))&&(i.delete(a.__key),u=a),a=a.getParent();for(t.isToken()?n===r?t.select():((e=Ar(e)).select(),t.replace(e)):\"\"===(t=t.spliceText(n,r-n,e,!0)).getTextContent()?t.remove():t.isComposing()&&\"text\"===this.anchor.type&&(this.anchor.offset-=e.length),e=1;e<s;e++)t=l[e],i.has(t.__key)||t.remove()}}removeText(){this.insertText(\"\")}formatText(e){if(this.isCollapsed())this.toggleFormat(e),Te(null);else{var t=this.getNodes(),n=[];for(var r of t)kr(r)&&n.push(r);var i=n.length;if(0===i)this.toggleFormat(e),Te(null);else{r=this.anchor;var o=this.focus,l=this.isBackward();t=l?o:r,r=l?r:o;var s=0,a=n[0];if(o=\"element\"===t.type?0:t.offset,\"text\"===t.type&&o===a.getTextContentSize()&&(s=1,a=n[1],o=0),null!=a){l=a.getFormatFlags(e,null);var u=i-1,d=n[u];if(i=\"text\"===r.type?r.offset:d.getTextContentSize(),a.is(d))o!==i&&(0===o&&i===a.getTextContentSize()?a.setFormat(l):(e=a.splitText(o,i),(e=0===o?e[0]:e[1]).setFormat(l),\"text\"===t.type&&t.set(e.__key,0,\"text\"),\"text\"===r.type&&r.set(e.__key,i-o,\"text\")),this.format=l);else{0!==o&&([,a]=a.splitText(o),o=0),a.setFormat(l);var c=d.getFormatFlags(e,l);for(0<i&&(i!==d.getTextContentSize()&&([d]=d.splitText(i)),d.setFormat(c)),s+=1;s<u;s++){let t=n[s];if(!t.isToken()){let n=t.getFormatFlags(e,c);t.setFormat(n)}}\"text\"===t.type&&t.set(a.__key,o,\"text\"),\"text\"===r.type&&r.set(d.__key,i,\"text\"),this.format=l|c}}}}}insertNodes(e,t){if(!this.isCollapsed()){var n=this.isBackward()?this.anchor:this.focus,r=n.getNode().getNextSibling();if(r=r?r.getKey():null,n=(n=n.getNode().getPreviousSibling())?n.getKey():null,this.removeText(),this.isCollapsed()&&\"element\"===this.focus.type){if(this.focus.key===r&&0===this.focus.offset){var i=Ar();this.focus.getNode().insertBefore(i)}else this.focus.key===n&&this.focus.offset===this.focus.getNode().getChildrenSize()&&(i=Ar(),this.focus.getNode().insertAfter(i));i&&(this.focus.set(i.__key,0,\"text\"),this.anchor.set(i.__key,0,\"text\"))}}n=(i=this.anchor).offset;var o=i.getNode();r=o,\"element\"===i.type&&(r=null===(r=(i=i.getNode()).getChildAtIndex(n-1))?i:r),i=[];var l=o.getNextSiblings(),s=Ue(o)?null:o.getTopLevelElementOrThrow();if(kr(o))if(r=o.getTextContent().length,0===n&&0!==r)r=null!==(r=o.getPreviousSibling())?r:o.getParentOrThrow(),i.push(o);else if(n===r)r=o;else{if(o.isToken())return!1;[r,o]=o.splitText(n),i.push(o)}o=r,i.push(...l),l=e[0];var a=!1,u=null;for(let t=0;t<e.length;t++){var d=e[t];if(Ue(r)||or(r)||!sr(d)||d.isInline())a&&!sr(d)&&!or(d)&&Ue(r.getParent())&&L(28);else{if(d.is(l)){if(sr(r)&&r.isEmpty()&&r.canReplaceWith(d)){r.replace(d),r=d,a=!0;continue}if(me(a=d.getFirstDescendant())){for(var c=a.getParentOrThrow();c.isInline();)c=c.getParentOrThrow();if(a=(u=c.getChildren()).length,sr(r)){var f=r.getFirstChild();for(let e=0;e<a;e++){let t=u[e];null===f?r.append(t):f.insertAfter(t),f=t}}else{for(f=a-1;0<=f;f--)r.insertAfter(u[f]);r=r.getParentOrThrow()}if(u=u[a-1],c.remove(),a=!0,c.is(d))continue}}kr(r)&&(null===s&&L(27),r=s)}a=!1,sr(r)&&!r.isInline()?(u=d,or(d)&&!d.isInline()?r=r.insertAfter(d,!1):sr(d)?!d.canBeEmpty()&&d.isEmpty()||(dr(r)?(null!==(c=r.getChildAtIndex(n))?c.insertBefore(d):r.append(d),r=d):d.isInline()?(r.append(d),r=d):r=r.insertAfter(d,!1)):(null!==(c=r.getFirstChild())?c.insertBefore(d):r.append(d),r=d)):!sr(d)||sr(d)&&d.isInline()||or(r)&&!r.isInline()?(u=d,pn(this)&&or(d)&&(sr(r)||kr(r))&&!d.isInline()?(kr(r)?(c=r.getParentOrThrow(),[r]=r.splitText(n),r=r.getIndexWithinParent()+1):(c=r,r=n),[,r]=tt(c,r),r=r.insertBefore(d)):r=r.insertAfter(d,!1)):(d=r.getParentOrThrow(),yr(r)&&r.remove(),r=d,t--)}if(t&&(kr(o)?o.select():kr(e=r.getPreviousSibling())?e.select():(e=r.getIndexWithinParent(),r.getParentOrThrow().select(e,e))),sr(r)){if(e=kr(u)?u:sr(u)&&u.isInline()?u.getLastDescendant():r.getLastDescendant(),t||(null===e?r.select():kr(e)?\"\"===e.getTextContent()?e.selectPrevious():e.select():e.selectNext()),0!==i.length)for(t=r,e=i.length-1;0<=e;e--)s=(n=i[e]).getParentOrThrow(),!sr(r)||wn(n)||or(n)&&(!n.isInline()||n.isIsolated())?sr(r)||wn(n)?sr(n)&&!n.canInsertAfter(r)?(sr(o=s.constructor.clone(s))||L(29),o.append(n),r.insertAfter(o)):r.insertAfter(n):(r.insertBefore(n),r=n):(t===r?r.append(n):r.insertBefore(n),r=n),s.isEmpty()&&!s.canBeEmpty()&&s.remove()}else t||(kr(r)?r.select():(t=r.getParentOrThrow(),e=r.getIndexWithinParent()+1,t.select(e,e)));return!0}insertParagraph(){this.isCollapsed()||this.removeText();var e=this.anchor,t=e.offset,n=[];if(\"text\"===e.type){var r=e.getNode(),i=r.getNextSiblings().reverse(),o=r.getParentOrThrow(),l=o.isInline(),s=l?o.getTextContentSize():r.getTextContentSize();0===t?i.push(r):(l&&(n=o.getNextSiblings()),t===s||l&&t===r.getTextContentSize()||([,r]=r.splitText(t),i.push(r)))}else{if(Ue(o=e.getNode()))return i=Rr(),n=o.getChildAtIndex(t),i.select(),void(null!==n?n.insertBefore(i,!1):o.append(i));i=o.getChildren().slice(t).reverse()}if(r=i.length,0===t&&0<r&&o.isInline()){if(sr(i=(n=o.getParentOrThrow()).insertNewAfter(this,!1)))for(n=n.getChildren(),o=0;o<n.length;o++)i.append(n[o])}else if(null===(l=o.insertNewAfter(this,!1)))this.insertLineBreak();else if(sr(l))if(s=o.getFirstChild(),0===t&&(o.is(e.getNode())||s&&s.is(e.getNode()))&&0<r)o.insertBefore(l);else{if(o=null,t=n.length,e=l.getParentOrThrow(),0<t)for(s=0;s<t;s++)e.append(n[s]);if(0!==r)for(n=0;n<r;n++)t=i[n],null===o?l.append(t):o.insertBefore(t),o=t;l.canBeEmpty()||0!==l.getChildrenSize()?l.selectStart():(l.selectPrevious(),l.remove())}}insertLineBreak(e){let t=pr();var n=this.anchor;\"element\"===n.type&&(dr(n=n.getNode())&&this.insertParagraph()),e?this.insertNodes([t],!0):this.insertNodes([t])&&t.selectNext(0,0)}getCharacterOffsets(){return Tn(this)}extract(){var e=this.getNodes(),t=e.length,n=t-1,r=this.anchor;let i=this.focus;var o=e[0];let l=e[n],[s,a]=Tn(this);return 0===t?[]:1===t?kr(o)&&!this.isCollapsed()?(e=s>a?a:s,n=o.splitText(e,s>a?s:a),null!=(e=0===e?n[0]:n[1])?[e]:[]):[o]:(t=r.isBefore(i),kr(o)&&((r=t?s:a)===o.getTextContentSize()?e.shift():0!==r&&([,o]=o.splitText(r),e[0]=o)),kr(l)&&(o=l.getTextContent().length,0===(t=t?a:s)?e.pop():t!==o&&([l]=l.splitText(t),e[n]=l)),e)}modify(e,t,n){var r=this.focus,i=this.anchor,o=\"move\"===e,l=We(r,t);if(or(l)&&!l.isIsolated())o&&l.isKeyboardSelectable()?((t=An()).add(l.__key),Ae(t)):kr(e=t?l.getPreviousSibling():l.getNextSibling())?(l=e.__key,t=t?e.getTextContent().length:0,r.set(l,t,\"text\"),o&&i.set(l,t,\"text\")):(n=l.getParentOrThrow(),sr(e)?(n=e.__key,l=t?e.getChildrenSize():0):(l=l.getIndexWithinParent(),n=n.__key,t||l++),r.set(n,l,\"element\"),o&&i.set(n,l,\"element\"));else if(r=et((i=Un())._window)){var s=i._blockCursorElement,a=i._rootElement;if(null===a||null===s||!sr(l)||l.isInline()||l.canBeEmpty()||Ze(s,i,a),r.modify(e,t?\"backward\":\"forward\",n),0<r.rangeCount&&(l=r.getRangeAt(0),i=dr(i=this.anchor.getNode())?i:Je(i),this.applyDOMRange(l),this.dirty=!0,!o)){for(o=this.getNodes(),e=[],n=!1,s=0;s<o.length;s++)Ye(a=o[s],i)?e.push(a):n=!0;n&&0<e.length&&(t?sr(t=e[0])?t.selectStart():t.getParentOrThrow().selectStart():sr(t=e[e.length-1])?t.selectEnd():t.getParentOrThrow().selectEnd()),r.anchorNode===l.startContainer&&r.anchorOffset===l.startOffset||(t=this.focus,r=(o=this.anchor).key,l=o.offset,i=o.type,gn(o,t.key,t.offset,t.type),gn(t,r,l,i),this._cachedNodes=null)}}}deleteCharacter(e){if(this.isCollapsed()){var t=this.anchor,n=this.focus,r=t.getNode();if(!e&&(\"element\"===t.type&&sr(r)&&t.offset===r.getChildrenSize()||\"text\"===t.type&&t.offset===r.getTextContentSize())){var i=r.getParent();if(sr(i=r.getNextSibling()||(null===i?null:i.getNextSibling()))&&!i.canExtractContents())return}if(or(i=We(n,e))&&!i.isIsolated())return void(i.isKeyboardSelectable()&&sr(r)&&0===r.getChildrenSize()?(r.remove(),e=An(),e.add(i.__key),Ae(e)):i.remove());if(this.modify(\"extend\",e,\"character\"),this.isCollapsed()){if(e&&0===t.offset&&(\"element\"===t.type?t.getNode():t.getNode().getParentOrThrow()).collapseAtStart(this))return}else{if(i=\"text\"===n.type?n.getNode():null,r=\"text\"===t.type?t.getNode():null,null!==i&&i.isSegmented()){if(t=n.offset,n=i.getTextContentSize(),i.is(r)||e&&t!==n||!e&&0!==t)return void xn(i,e,t)}else if(null!==r&&r.isSegmented()&&(t=t.offset,n=r.getTextContentSize(),r.is(i)||e&&0!==t||!e&&t!==n))return void xn(r,e,t);if(r=this.anchor,i=this.focus,(t=r.getNode())===(n=i.getNode())&&\"text\"===r.type&&\"text\"===i.type){var o=r.offset,l=i.offset;let s=o<l;(n=s?o:l)!==(o=(l=s?l:o)-1)&&(Pe(t=t.getTextContent().slice(n,l))||(e?i.offset=o:r.offset=o))}}}r=this.isCollapsed(),this.removeText(),e&&!r&&this.isCollapsed()&&\"element\"===this.anchor.type&&0===this.anchor.offset&&((e=this.anchor.getNode()).isEmpty()&&dr(e.getParent())&&0===e.getIndexWithinParent()&&e.collapseAtStart(this))}deleteLine(e){this.isCollapsed()&&(\"text\"===this.anchor.type&&this.modify(\"extend\",e,\"lineboundary\"),0===(e?this.focus:this.anchor).offset&&this.modify(\"extend\",e,\"character\")),this.removeText()}deleteWord(e){this.isCollapsed()&&this.modify(\"extend\",e,\"word\"),this.removeText()}}function Cn(e){return e instanceof _n}function Nn(e){let t=e.offset;return\"text\"===e.type?t:t===(e=e.getNode()).getChildrenSize()?e.getTextContent().length:0}function Tn(e){let t=e.anchor;return e=e.focus,\"element\"===t.type&&\"element\"===e.type&&t.key===e.key&&t.offset===e.offset?[0,0]:[Nn(t),Nn(e)]}function xn(e,t,n){let r=e.getTextContent().split(/(?=\\s)/g),i=r.length,o=0,l=0;for(let e=0;e<i;e++){let s=e===i-1;if(l=o,o+=r[e].length,t&&o===n||o>n||s){r.splice(e,1),s&&(l=void 0);break}}\"\"===(t=r.join(\"\").trim())?e.remove():(e.setTextContent(t),e.select(l,l))}function Sn(e,t,n,r){var i=t;if(1===e.nodeType){let s=!1;var o=e.childNodes,l=o.length;i===l&&(s=!0,i=l-1);let a=o[i];if(l=!1,a===r._blockCursorElement?(a=o[i+1],l=!0):null!==r._blockCursorElement&&i--,kr(r=ke(a)))i=s?r.getTextContentSize():0;else{if(null===(o=ke(e)))return null;if(sr(o)?((t=sr(e=o.getChildAtIndex(i)))&&(t=e.getParent(),t=null===n||null===t||!t.canBeEmpty()||t!==n.getNode()),t&&(null===(n=s?e.getLastDescendant():e.getFirstDescendant())?(o=e,i=0):o=sr(e=n)?e:e.getParentOrThrow()),kr(e)?(r=e,o=null,i=s?e.getTextContentSize():0):e!==o&&s&&!l&&i++):(i=o.getIndexWithinParent(),i=0===t&&or(o)&&ke(e)===o?i:i+1,o=o.getParentOrThrow()),sr(o))return new dn(o.__key,i,\"element\")}}else r=ke(e);return kr(r)?new dn(r.__key,i,\"text\"):null}function En(e,t,n){var r=e.offset,i=e.getNode();0===r?(r=i.getPreviousSibling(),i=i.getParent(),t?(n||!t)&&null===r&&sr(i)&&i.isInline()&&(kr(t=i.getPreviousSibling())&&(e.key=t.__key,e.offset=t.getTextContent().length)):sr(r)&&!n&&r.isInline()?(e.key=r.__key,e.offset=r.getChildrenSize(),e.type=\"element\"):kr(r)&&(e.key=r.__key,e.offset=r.getTextContent().length)):r===i.getTextContent().length&&(r=i.getNextSibling(),i=i.getParent(),t&&sr(r)&&r.isInline()?(e.key=r.__key,e.offset=0,e.type=\"element\"):(n||t)&&null===r&&sr(i)&&i.isInline()&&!i.canInsertTextAfter()&&(kr(t=i.getNextSibling())&&(e.key=t.__key,e.offset=0)))}function bn(e,t,n){if(\"text\"===e.type&&\"text\"===t.type){var r=e.isBefore(t);let i=e.is(t);En(e,r,i),En(t,!r,i),i&&(t.key=e.key,t.offset=e.offset,t.type=e.type),(r=Un()).isComposing()&&r._compositionKey!==e.key&&pn(n)&&(r=n.anchor,n=n.focus,gn(e,r.key,r.offset,r.type),gn(t,n.key,n.offset,n.type))}}function On(e,t,n,r,i,o){return null!==e&&null!==n&&he(i,e,n)?null===(t=Sn(e,t,pn(o)?o.anchor:null,i))||null===(r=Sn(n,r,pn(o)?o.focus:null,i))||\"element\"===t.type&&\"element\"===r.type&&(e=ke(e),n=ke(n),or(e)&&or(n))?null:(bn(t,r,o),[t,r]):null}function wn(e){return sr(e)&&!e.isInline()}function Dn(e,t,n,r,i,o){let l=Jn();return(e=new vn(new dn(e,t,i),new dn(n,r,o),0,\"\")).dirty=!0,l._selection=e}function An(){return new _n(new Set)}function kn(e,t,n){var r=n._window;if(null===r)return null;var i=r.event,o=i?i.type:void 0;let l;if(r=\"selectionchange\"===o,i=!re&&(r||\"beforeinput\"===o||\"compositionstart\"===o||\"compositionend\"===o||\"click\"===o&&i&&3===i.detail||\"drop\"===o||void 0===o),pn(e)&&!i)return e.clone();if(null===t)return null;if(i=t.anchorNode,o=t.focusNode,l=t.anchorOffset,t=t.focusOffset,r&&pn(e)&&!he(n,i,o))return e.clone();if(null===(n=On(i,l,o,t,n,e)))return null;let[s,a]=n;return new vn(s,a,pn(e)?e.format:0,pn(e)?e.style:\"\")}function Pn(){return Jn()._selection}function Mn(){return Un()._editorState._selection}function Rn(e,t,n,r=1){var i=e.anchor,o=e.focus,l=i.getNode(),s=o.getNode();if(t.is(l)||t.is(s))if(l=t.__key,e.isCollapsed())n<=(t=i.offset)&&(n=Math.max(0,t+r),i.set(l,n,\"element\"),o.set(l,n,\"element\"),$n(e));else{var a=e.isBackward(),u=(s=a?o:i).getNode();o=(i=a?i:o).getNode(),t.is(u)&&(n<=(u=s.offset)&&s.set(l,Math.max(0,u+r),\"element\")),t.is(o)&&(n<=(t=i.offset)&&i.set(l,Math.max(0,t+r),\"element\")),$n(e)}}function $n(e){var t=e.anchor,n=t.offset;let r=e.focus;var i=r.offset,o=t.getNode(),l=r.getNode();if(e.isCollapsed())sr(o)&&(kr(l=(i=n>=(l=o.getChildrenSize()))?o.getChildAtIndex(l-1):o.getChildAtIndex(n))&&(n=0,i&&(n=l.getTextContentSize()),t.set(l.__key,n,\"text\"),r.set(l.__key,n,\"text\")));else{if(sr(o)){let r=o.getChildrenSize();kr(n=(e=n>=r)?o.getChildAtIndex(r-1):o.getChildAtIndex(n))&&(o=0,e&&(o=n.getTextContentSize()),t.set(n.__key,o,\"text\"))}sr(l)&&(kr(i=(t=i>=(n=l.getChildrenSize()))?l.getChildAtIndex(n-1):l.getChildAtIndex(i))&&(l=0,t&&(l=i.getTextContentSize()),r.set(i.__key,l,\"text\")))}}function In(e,t,n,r,i){let o=null,l=0,s=null;null!==r?(o=r.__key,kr(r)?(l=r.getTextContentSize(),s=\"text\"):sr(r)&&(l=r.getChildrenSize(),s=\"element\")):null!==i&&(o=i.__key,kr(i)?s=\"text\":sr(i)&&(s=\"element\")),null!==o&&null!==s?e.set(o,l,s):(l=t.getIndexWithinParent(),-1===l&&(l=n.getChildrenSize()),e.set(n.__key,l,\"element\"))}function Ln(e,t,n,r,i){\"text\"===e.type?(e.key=n,t||(e.offset+=i)):e.offset>r.getIndexWithinParent()&&--e.offset}function Fn(e,t,n){let r=[],i=null,o=null;e=e.getChildren();for(let d=0;d<e.length;d++){var l=e[d];zr(l)||L(108);var s=l.getChildren();l=0;for(let e of s){for(Fr(e)||L(109);void 0!==r[d]&&void 0!==r[d][l];)l++;var a=l,u=e;let c={cell:u,startColumn:a,startRow:s=d},f=u.__rowSpan,h=u.__colSpan;for(let e=0;e<f;e++){void 0===r[s+e]&&(r[s+e]=[]);for(let t=0;t<h;t++)r[s+e][a+t]=c}t.is(u)&&(i=c),n.is(u)&&(o=c),l+=e.__colSpan}}return null===i&&L(110),null===o&&L(111),[r,i,o]}let Bn=null,Wn=null,Kn=!1,zn=!1,Gn=0,jn={characterData:!0,childList:!0,subtree:!0};function Yn(){return Kn||null!==Bn&&Bn._readOnly}function Hn(){Kn&&L(13)}function Jn(){return null===Bn&&L(15),Bn}function Un(){return null===Wn&&L(16),Wn}function Vn(e,t,n){var r=t.__type;let i=e._nodes.get(r);for(void 0===i&&L(30),void 0===(e=n.get(r))&&(e=Array.from(i.transforms),n.set(r,e)),n=e.length,r=0;r<n&&(e[r](t),t.isAttached());r++);}function Xn(e,t){var n=t.get(e.type);if(void 0===n&&L(17),n=n.klass,e.type!==n.getType()&&L(18),n=n.importJSON(e),e=e.children,sr(n)&&Array.isArray(e))for(let r=0;r<e.length;r++){let i=Xn(e[r],t);n.append(i)}return n}function qn(e,t){let n=Bn,r=Kn,i=Wn;Bn=e,Kn=!0,Wn=null;try{return t()}finally{Bn=n,Kn=r,Wn=i}}function Qn(e){let t=e._pendingEditorState,r=e._rootElement,i=e._headless||null===r;if(null!==t){var o=e._editorState,l=o._selection,s=t._selection,a=0!==e._dirtyType,u=Bn,d=Kn,c=Wn,f=e._updating,h=e._observer,g=null;if(e._pendingEditorState=null,e._editorState=t,!i&&a&&null!==h){Wn=e,Bn=t,Kn=!1,e._updating=!0;try{let n=e._dirtyType,r=e._dirtyElements,i=e._dirtyLeaves;h.disconnect();var _=r,p=i;Nt=Tt=Ct=\"\",xt=2===n,Et=null,ct=e,dt=e._config,ft=e._nodes,ht=ct._listeners.mutation,gt=_,_t=p,pt=o._nodeMap,yt=t._nodeMap,St=t._readOnly,mt=new Map(e._keyToDOMMap);let l=new Map;vt=l,Lt(\"root\",null),vt=mt=dt=yt=pt=_t=gt=ft=ct=void 0,g=l}catch(n){if(n instanceof Error&&e._onError(n),zn)throw n;return $r(e,null,r,t),ue(e),e._dirtyType=2,zn=!0,Qn(e),void(zn=!1)}finally{h.observe(r,jn),e._updating=f,Bn=u,Kn=d,Wn=c}}t._readOnly||(t._readOnly=!0);var y=e._dirtyLeaves,m=e._dirtyElements,v=e._normalizedNodes,C=e._updateTags,N=e._deferred;a&&(e._dirtyType=0,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements=new Map,e._normalizedNodes=new Set,e._updateTags=new Set);var T,x=e._decorators,S=e._pendingDecorators||x,E=t._nodeMap;for(T in S)E.has(T)||(S===x&&(S=Oe(e)),delete S[T]);var b=i?null:et(e._window);if(e._editable&&null!==b&&(a||null===s||s.dirty)){Wn=e,Bn=t;try{if(null!==h&&h.disconnect(),a||null===s||s.dirty){let t=e._blockCursorElement;null!==t&&Ze(t,e,r);e:{let t=b.anchorNode,n=b.focusNode,i=b.anchorOffset,o=b.focusOffset,a=document.activeElement;if(!(C.has(\"collaboration\")&&a!==r||null!==a&&fe(a)))if(pn(s)){var O=s.anchor,w=s.focus,D=O.key,A=w.key,k=Ge(e,D),P=Ge(e,A),M=O.offset,R=w.offset,$=s.format,I=s.style,L=s.isCollapsed(),F=k,B=P,W=!1;if(\"text\"===O.type){F=pe(k);let e=O.getNode();W=e.getFormat()!==$||e.getStyle()!==I}else pn(l)&&\"text\"===l.anchor.type&&(W=!0);if(\"text\"===w.type&&(B=pe(P)),null!==F&&null!==B){if(L&&(null===l||W||pn(l)&&(l.format!==$||l.style!==I))){var K=performance.now();Qt=[$,I,M,D,K]}if(i===M&&o===R&&t===F&&n===B&&(\"Range\"!==b.type||!L)&&(null!==a&&r.contains(a)||r.focus({preventScroll:!0}),\"element\"!==O.type))break e;try{b.setBaseAndExtent(F,M,B,R)}catch(e){}if(!C.has(\"skip-scroll-into-view\")&&s.isCollapsed()&&null!==r&&r===document.activeElement){let t=s instanceof vn&&\"element\"===s.anchor.type?F.childNodes[M]||null:0<b.rangeCount?b.getRangeAt(0):null;if(null!==t){let n=t.getBoundingClientRect(),i=r.ownerDocument,o=i.defaultView;if(null!==o)for(var z,G,{top:j,bottom:Y}=n,H=r;null!==H;){let t=H===i.body;if(t)z=0,G=He(e).innerHeight;else{let e=H.getBoundingClientRect();z=e.top,G=e.bottom}let n=0;if(j<z?n=-(z-j):Y>G&&(n=Y-G),0!==n)if(t)o.scrollBy(0,n);else{let e=H.scrollTop;H.scrollTop+=n;let t=H.scrollTop-e;j-=t,Y-=t}if(t)break;H=je(H)}}}Ut=!0}}else null!==l&&he(e,t,n)&&b.removeAllRanges()}}e:{let t=e._blockCursorElement;if(pn(s)&&s.isCollapsed()&&\"element\"===s.anchor.type&&r.contains(document.activeElement)){let n=s.anchor,i=n.getNode(),o=n.offset,l=i.getChildrenSize(),a=!1,u=null;if(o===l){Qe(i.getChildAtIndex(o-1))&&(a=!0)}else{let t=i.getChildAtIndex(o);if(Qe(t)){let n=t.getPreviousSibling();(null===n||Qe(n))&&(a=!0,u=e.getElementByKey(t.__key))}}if(a){let n=e.getElementByKey(i.__key);if(null===t){let n=e._config.theme,r=document.createElement(\"div\");r.contentEditable=\"false\",r.setAttribute(\"data-lexical-cursor\",\"true\");let i=n.blockCursor;if(void 0!==i){if(\"string\"==typeof i){let e=i.split(\" \");i=n.blockCursor=e}void 0!==i&&r.classList.add(...i)}e._blockCursorElement=t=r}r.style.caretColor=\"transparent\",null===u?n.appendChild(t):n.insertBefore(t,u);break e}}null!==t&&Ze(t,e,r)}null!==h&&h.observe(r,jn)}finally{Wn=c,Bn=u}}if(null!==g){var J=g;let t=Array.from(e._listeners.mutation),n=t.length;for(let e=0;e<n;e++){let[n,r]=t[e],i=J.get(r);void 0!==i&&n(i,{dirtyLeaves:y,updateTags:C})}}pn(s)||null===s||null!==l&&l.is(s)||e.dispatchCommand(n,void 0);var U=e._pendingDecorators;null!==U&&(e._decorators=U,e._pendingDecorators=null,Zn(\"decorator\",e,!0,U));var V=we(o),X=we(t);if(V!==X&&Zn(\"textcontent\",e,!0,X),Zn(\"update\",e,!0,{dirtyElements:m,dirtyLeaves:y,editorState:t,normalizedNodes:v,prevEditorState:o,tags:C}),e._deferred=[],0!==N.length){let t=e._updating;e._updating=!0;try{for(let e=0;e<N.length;e++)N[e]()}finally{e._updating=t}}var q=e._updates;if(0!==q.length){let t=q.shift();if(t){let[n,r]=t;nr(e,n,r)}}}}function Zn(e,t,n,...r){let i=t._updating;t._updating=n;try{let n=Array.from(t._listeners[e]);for(e=0;e<n.length;e++)n[e].apply(null,r)}finally{t._updating=i}}function er(e,t,n){if(!1===e._updating||Wn!==e){let r=!1;return e.update((()=>{r=er(e,t,n)})),r}let r=Me(e);for(let o=4;0<=o;o--)for(let l=0;l<r.length;l++){var i=r[l]._commands.get(t);if(void 0!==i&&void 0!==(i=i[o])){let t=(i=Array.from(i)).length;for(let r=0;r<t;r++)if(!0===i[r](n,e))return!0}}return!1}function tr(e,t){let n=e._updates;for(t=t||!1;0!==n.length;){var r=n.shift();if(r){let n,[i,o]=r;void 0!==o&&(r=o.onUpdate,n=o.tag,o.skipTransforms&&(t=!0),r&&e._deferred.push(r),n&&e._updateTags.add(n)),i()}}return t}function nr(e,t,n){let r=e._updateTags;var i,o=i=!1;if(void 0!==n){var l=n.onUpdate;null!=(i=n.tag)&&r.add(i),i=n.skipTransforms||!1,o=n.discrete||!1}l&&e._deferred.push(l),n=e._editorState;let s=!1;(null===(l=e._pendingEditorState)||l._readOnly)&&(l=e._pendingEditorState=new hr(new Map((l||n)._nodeMap)),s=!0),l._flushSync=o,o=Bn;let a=Kn,u=Wn,d=e._updating;Bn=l,Kn=!1,e._updating=!0,Wn=e;try{s&&(e._headless?null!=n._selection&&(l._selection=n._selection.clone()):l._selection=function(e){let t=e.getEditorState()._selection,n=et(e._window);return Cn(t)||mn(t)?t.clone():kn(t,n,e)}(e));let r=e._compositionKey;t(),i=tr(e,i),function(e,t){if(t=t.getEditorState()._selection,pn(e=e._selection)){var n=e.anchor;let r,i=e.focus;\"text\"===n.type&&(r=n.getNode(),r.selectionTransform(t,e)),\"text\"===i.type&&r!==(n=i.getNode())&&n.selectionTransform(t,e)}}(l,e),0!==e._dirtyType&&(i?function(e,t){t=t._dirtyLeaves,e=e._nodeMap;for(let n of t)kr(t=e.get(n))&&t.isAttached()&&t.isSimpleText()&&!t.isUnmergeable()&&st(t)}(l,e):function(e,t){let n=t._dirtyLeaves,r=t._dirtyElements;e=e._nodeMap;let i=xe(),o=new Map;var l=n;let s=l.size;for(var a=r,u=a.size;0<s||0<u;){if(0<s){t._dirtyLeaves=new Set;for(let r of l)kr(l=e.get(r))&&l.isAttached()&&l.isSimpleText()&&!l.isUnmergeable()&&st(l),void 0!==l&&void 0!==l&&l.__key!==i&&l.isAttached()&&Vn(t,l,o),n.add(r);if(s=(l=t._dirtyLeaves).size,0<s){Gn++;continue}}t._dirtyLeaves=new Set,t._dirtyElements=new Map;for(let n of a)a=n[0],u=n[1],(\"root\"===a||u)&&(void 0!==(l=e.get(a))&&void 0!==l&&l.__key!==i&&l.isAttached()&&Vn(t,l,o),r.set(a,u));s=(l=t._dirtyLeaves).size,u=(a=t._dirtyElements).size,Gn++}t._dirtyLeaves=n,t._dirtyElements=r}(l,e),tr(e),function(e,t,n,r){e=e._nodeMap,t=t._nodeMap;for(let r of n){let i=t.get(r);void 0===i||i.isAttached()||(e.has(r)||n.delete(r),t.delete(r))}for(let[i]of r)void 0===(n=t.get(i))||n.isAttached()||(sr(n)&&it(n,i,e,t,r),e.has(i)||r.delete(i),t.delete(i))}(n,l,e._dirtyLeaves,e._dirtyElements)),r!==e._compositionKey&&(l._flushSync=!0);let o=l._selection;if(pn(o)){let e=l._nodeMap,t=o.focus.key;void 0!==e.get(o.anchor.key)&&void 0!==e.get(t)||L(19)}else Cn(o)&&0===o._nodes.size&&(l._selection=null)}catch(t){return t instanceof Error&&e._onError(t),e._pendingEditorState=n,e._dirtyType=2,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),void Qn(e)}finally{Bn=o,Kn=a,Wn=u,e._updating=d,Gn=0}0!==e._dirtyType||function(e,t){if(t=t.getEditorState()._selection,e=e._selection,null!==e){if(e.dirty||!e.is(t))return!0}else if(null!==t)return!0;return!1}(l,e)?l._flushSync?(l._flushSync=!1,Qn(e)):s&&ce((()=>{Qn(e)})):(l._flushSync=!1,s&&(r.clear(),e._deferred=[],e._pendingEditorState=null))}function rr(e,t,n){e._updating?e._updates.push([t,n]):nr(e,t,n)}class ir extends un{constructor(e){super(e)}decorate(){L(47)}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}}function or(e){return e instanceof ir}class lr extends un{constructor(e){super(e),this.__last=this.__first=null,this.__indent=this.__format=this.__size=0,this.__dir=null}getFormat(){return this.getLatest().__format}getFormatType(){let e=this.getFormat();return ee[e]||\"\"}getIndent(){return this.getLatest().__indent}getChildren(){let e=[],t=this.getFirstChild();for(;null!==t;)e.push(t),t=t.getNextSibling();return e}getChildrenKeys(){let e=[],t=this.getFirstChild();for(;null!==t;)e.push(t.__key),t=t.getNextSibling();return e}getChildrenSize(){return this.getLatest().__size}isEmpty(){return 0===this.getChildrenSize()}isDirty(){let e=Un()._dirtyElements;return null!==e&&e.has(this.__key)}isLastChild(){let e=this.getLatest(),t=this.getParentOrThrow().getLastChild();return null!==t&&t.is(e)}getAllTextNodes(){let e=[],t=this.getFirstChild();for(;null!==t;){if(kr(t)&&e.push(t),sr(t)){let n=t.getAllTextNodes();e.push(...n)}t=t.getNextSibling()}return e}getFirstDescendant(){let e=this.getFirstChild();for(;null!==e;){if(sr(e)){let t=e.getFirstChild();if(null!==t){e=t;continue}}break}return e}getLastDescendant(){let e=this.getLastChild();for(;null!==e;){if(sr(e)){let t=e.getLastChild();if(null!==t){e=t;continue}}break}return e}getDescendantByIndex(e){let t=this.getChildren(),n=t.length;return e>=n?sr(e=t[n-1])&&e.getLastDescendant()||e||null:sr(e=t[e])&&e.getFirstDescendant()||e||null}getFirstChild(){let e=this.getLatest().__first;return null===e?null:Se(e)}getFirstChildOrThrow(){let e=this.getFirstChild();return null===e&&L(45),e}getLastChild(){let e=this.getLatest().__last;return null===e?null:Se(e)}getLastChildOrThrow(){let e=this.getLastChild();return null===e&&L(96),e}getChildAtIndex(e){var t=this.getChildrenSize();let n;if(e<t/2){for(n=this.getFirstChild(),t=0;null!==n&&t<=e;){if(t===e)return n;n=n.getNextSibling(),t++}return null}for(n=this.getLastChild(),--t;null!==n&&t>=e;){if(t===e)return n;n=n.getPreviousSibling(),t--}return null}getTextContent(){let e=\"\",t=this.getChildren(),n=t.length;for(let r=0;r<n;r++){let i=t[r];e+=i.getTextContent(),sr(i)&&r!==n-1&&!i.isInline()&&(e+=\"\\n\\n\")}return e}getTextContentSize(){let e=0,t=this.getChildren(),n=t.length;for(let r=0;r<n;r++){let i=t[r];e+=i.getTextContentSize(),sr(i)&&r!==n-1&&!i.isInline()&&(e+=2)}return e}getDirection(){return this.getLatest().__dir}hasFormat(e){return\"\"!==e&&(e=Z[e],0!=(this.getFormat()&e))}select(e,t){Hn();let n=Pn(),r=e,i=t;var o=this.getChildrenSize();if(!this.canBeEmpty())if(0===e&&0===t){if(kr(e=this.getFirstChild())||sr(e))return e.select(0,0)}else if(!(void 0!==e&&e!==o||void 0!==t&&t!==o)&&(kr(e=this.getLastChild())||sr(e)))return e.select();return void 0===r&&(r=o),void 0===i&&(i=o),o=this.__key,pn(n)?(n.anchor.set(o,r,\"element\"),n.focus.set(o,i,\"element\"),n.dirty=!0,n):Dn(o,r,o,i,\"element\",\"element\")}selectStart(){let e=this.getFirstDescendant();return sr(e)||kr(e)?e.select(0,0):null!==e?e.selectPrevious():this.select(0,0)}selectEnd(){let e=this.getLastDescendant();return sr(e)||kr(e)?e.select():null!==e?e.selectNext():this.select()}clear(){let e=this.getWritable();return this.getChildren().forEach((e=>e.remove())),e}append(...e){return this.splice(this.getChildrenSize(),0,e)}setDirection(e){let t=this.getWritable();return t.__dir=e,t}setFormat(e){return this.getWritable().__format=\"\"!==e?Z[e]:0,this}setIndent(e){return this.getWritable().__indent=e,this}splice(e,t,n){let r=n.length,i=this.getChildrenSize(),o=this.getWritable(),l=o.__key;var s=[],a=[];let u=this.getChildAtIndex(e+t),d=null,c=i-t+r;if(0!==e)if(e===i)d=this.getLastChild();else{var f=this.getChildAtIndex(e);null!==f&&(d=f.getPreviousSibling())}if(0<t){var h=null===d?this.getFirstChild():d.getNextSibling();for(f=0;f<t;f++){null===h&&L(100);var g=h.getNextSibling(),_=h.__key;Ce(h=h.getWritable()),a.push(_),h=g}}for(f=d,g=0;g<r;g++){_=n[g],null!==f&&_.is(f)&&(d=f=f.getPreviousSibling()),(h=_.getWritable()).__parent===l&&c--,Ce(h);let e=_.__key;null===f?(o.__first=e,h.__prev=null):((f=f.getWritable()).__next=e,h.__prev=f.__key),_.__key===l&&L(76),h.__parent=l,s.push(e),f=_}if(e+t===i?null!==f&&(f.getWritable().__next=null,o.__last=f.__key):null!==u&&(e=u.getWritable(),null!==f?(t=f.getWritable(),e.__prev=f.__key,t.__next=u.__key):e.__prev=null),o.__size=c,a.length&&pn(e=Pn())){a=new Set(a),s=new Set(s);let{anchor:t,focus:n}=e;ar(t,a,s)&&In(t,t.getNode(),this,d,u),ar(n,a,s)&&In(n,n.getNode(),this,d,u),0!==c||this.canBeEmpty()||Ue(this)||this.remove()}return o}exportJSON(){return{children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),type:\"element\",version:1}}insertNewAfter(){return null}canInsertTab(){return!1}canIndent(){return!0}collapseAtStart(){return!1}excludeFromCopy(){return!1}canExtractContents(){return!0}canReplaceWith(){return!0}canInsertAfter(){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(){return!1}extractWithChild(){return!1}}function sr(e){return e instanceof lr}function ar(e,t,n){for(e=e.getNode();e;){let r=e.__key;if(t.has(r)&&!n.has(r))return!0;e=e.getParent()}return!1}class ur extends lr{static getType(){return\"root\"}static clone(){return new ur}constructor(){super(\"root\"),this.__cachedText=null}getTopLevelElementOrThrow(){L(51)}getTextContent(){let e=this.__cachedText;return!Yn()&&0!==Un()._dirtyType||null===e?super.getTextContent():e}remove(){L(52)}replace(){L(53)}insertBefore(){L(54)}insertAfter(){L(55)}updateDOM(){return!1}append(...e){for(let t=0;t<e.length;t++){let n=e[t];sr(n)||or(n)||L(56)}return super.append(...e)}static importJSON(e){let t=De();return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportJSON(){return{children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),type:\"root\",version:1}}collapseAtStart(){return!0}}function dr(e){return e instanceof ur}function cr(){return new hr(new Map([[\"root\",new ur]]))}function fr(e){let t=e.exportJSON();t.type!==e.constructor.getType()&&L(58);let n=t.children;if(sr(e)){Array.isArray(n)||L(59),e=e.getChildren();for(let t=0;t<e.length;t++){let r=fr(e[t]);n.push(r)}}return t}class hr{constructor(e,t){this._nodeMap=e,this._selection=t||null,this._readOnly=this._flushSync=!1}isEmpty(){return 1===this._nodeMap.size&&null===this._selection}read(e){return qn(this,e)}clone(e){return(e=new hr(this._nodeMap,void 0===e?this._selection:e))._readOnly=!0,e}toJSON(){return qn(this,(()=>({root:fr(De())})))}}class gr extends un{static getType(){return\"linebreak\"}static clone(e){return new gr(e.__key)}constructor(e){super(e)}getTextContent(){return\"\\n\"}createDOM(){return document.createElement(\"br\")}updateDOM(){return!1}static importDOM(){return{br:e=>{let t=e.parentElement;return null!=t&&t.firstChild===e&&t.lastChild===e?null:{conversion:_r,priority:0}}}}static importJSON(){return pr()}exportJSON(){return{type:\"linebreak\",version:1}}}function _r(){return{node:pr()}}function pr(){return Xe(new gr)}function yr(e){return e instanceof gr}function mr(e,t){return 16&t?\"code\":128&t?\"mark\":32&t?\"sub\":64&t?\"sup\":null}function vr(e,t){return 1&t?\"strong\":2&t?\"em\":\"span\"}function Cr(e,t,n,r,i){e=r.classList,void 0!==(r=Le(i,\"base\"))&&e.add(...r);let o=!1,l=8&t&&4&t;var s=8&n&&4&n;void 0!==(r=Le(i,\"underlineStrikethrough\"))&&(s?(o=!0,l||e.add(...r)):l&&e.remove(...r));for(let a in q)s=q[a],void 0!==(r=Le(i,a))&&(n&s&&(!o||\"underline\"!==a&&\"strikethrough\"!==a)?(0==(t&s)||l&&\"underline\"===a||\"strikethrough\"===a)&&e.add(...r):t&s&&e.remove(...r))}function Nr(e,t,n){let r=t.firstChild;if(e+=(n=n.isComposing())?J:\"\",null==r)t.textContent=e;else if((t=r.nodeValue)!==e)if(n||K){n=t.length;let i=e.length,o=0,l=0;for(;o<n&&o<i&&t[o]===e[o];)o++;for(;l+o<n&&l+o<i&&t[n-l-1]===e[i-l-1];)l++;e=[o,n-o-l,e.slice(o,i-l)];let[s,a,u]=e;0!==a&&r.deleteData(s,a),r.insertData(s,u)}else r.nodeValue=e}function Tr(e,t){return(t=document.createElement(t)).appendChild(e),t}class xr extends un{static getType(){return\"text\"}static clone(e){return new xr(e.__text,e.__key)}constructor(e,t){super(t),this.__text=e,this.__format=0,this.__style=\"\",this.__detail=this.__mode=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){let e=this.getLatest();return ne[e.__mode]}getStyle(){return this.getLatest().__style}isToken(){return 1===this.getLatest().__mode}isComposing(){return this.__key===xe()}isSegmented(){return 2===this.getLatest().__mode}isDirectionless(){return 0!=(1&this.getLatest().__detail)}isUnmergeable(){return 0!=(2&this.getLatest().__detail)}hasFormat(e){return e=q[e],0!=(this.getFormat()&e)}isSimpleText(){return\"text\"===this.__type&&0===this.__mode}getTextContent(){return this.getLatest().__text}getFormatFlags(e,t){return ye(this.getLatest().__format,e,t)}createDOM(e){var t=this.__format,n=mr(0,t);let r=vr(0,t),i=document.createElement(null===n?r:n),o=i;return null!==n&&(o=document.createElement(r),i.appendChild(o)),n=o,Nr(this.__text,n,this),void 0!==(e=e.theme.text)&&Cr(r,0,t,n,e),\"\"!==(t=this.__style)&&(i.style.cssText=t),i}updateDOM(e,t,n){let r=this.__text;var i=e.__format,o=this.__format,l=mr(0,i);let s=mr(0,o);var a=vr(0,i);let u=vr(0,o);return(null===l?a:l)!==(null===s?u:s)||(l===s&&a!==u?(null==(i=t.firstChild)&&L(48),Nr(r,e=l=document.createElement(u),this),void 0!==(n=n.theme.text)&&Cr(u,0,o,e,n),t.replaceChild(l,i),!1):(a=t,null!==s&&null!==l&&(null==(a=t.firstChild)&&L(49)),Nr(r,a,this),void 0!==(n=n.theme.text)&&i!==o&&Cr(u,i,o,a,n),o=this.__style,e.__style!==o&&(t.style.cssText=o),!1))}static importDOM(){return{\"#text\":()=>({conversion:Or,priority:0}),b:()=>({conversion:br,priority:0}),br:()=>({conversion:Er,priority:0}),code:()=>({conversion:Dr,priority:0}),em:()=>({conversion:Dr,priority:0}),i:()=>({conversion:Dr,priority:0}),s:()=>({conversion:Dr,priority:0}),span:()=>({conversion:Sr,priority:0}),strong:()=>({conversion:Dr,priority:0}),sub:()=>({conversion:Dr,priority:0}),sup:()=>({conversion:Dr,priority:0}),u:()=>({conversion:Dr,priority:0})}}static importJSON(e){let t=Ar(e.text);return t.setFormat(e.format),t.setDetail(e.detail),t.setMode(e.mode),t.setStyle(e.style),t}exportDOM(e){return({element:e}=super.exportDOM(e)),null!==e&&(this.hasFormat(\"bold\")&&(e=Tr(e,\"b\")),this.hasFormat(\"italic\")&&(e=Tr(e,\"i\")),this.hasFormat(\"strikethrough\")&&(e=Tr(e,\"s\")),this.hasFormat(\"underline\")&&(e=Tr(e,\"u\"))),{element:e}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),type:\"text\",version:1}}selectionTransform(){}setFormat(e){let t=this.getWritable();return t.__format=\"string\"==typeof e?q[e]:e,t}setDetail(e){let t=this.getWritable();return t.__detail=\"string\"==typeof e?Q[e]:e,t}setStyle(e){let t=this.getWritable();return t.__style=e,t}toggleFormat(e){return e=q[e],this.setFormat(this.getFormat()^e)}toggleDirectionless(){let e=this.getWritable();return e.__detail^=1,e}toggleUnmergeable(){let e=this.getWritable();return e.__detail^=2,e}setMode(e){if(e=te[e],this.__mode===e)return this;let t=this.getWritable();return t.__mode=e,t}setTextContent(e){if(this.__text===e)return this;let t=this.getWritable();return t.__text=e,t}select(e,t){Hn();let n=Pn();var r=this.getTextContent();let i=this.__key;return\"string\"==typeof r?(r=r.length,void 0===e&&(e=r),void 0===t&&(t=r)):t=e=0,pn(n)?((r=xe())!==n.anchor.key&&r!==n.focus.key||Te(i),n.setTextNodeRange(this,e,this,t),n):Dn(i,e,i,t,\"text\",\"text\")}spliceText(e,t,n,r){let i=this.getWritable(),o=i.__text,l=n.length,s=e;0>s&&(s=l+s,0>s&&(s=0));let a=Pn();return r&&pn(a)&&(e+=l,a.setTextNodeRange(i,e,i,e)),t=o.slice(0,s)+n+o.slice(s+t),i.__text=t,i}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}canContainTabs(){return!1}splitText(...e){Hn();var t=this.getLatest(),n=t.getTextContent(),r=t.__key,i=xe(),o=new Set(e);e=[];for(var l=n.length,s=\"\",a=0;a<l;a++)\"\"!==s&&o.has(a)&&(e.push(s),s=\"\"),s+=n[a];if(\"\"!==s&&e.push(s),0===(o=e.length))return[];if(e[0]===n)return[t];var u=e[0];n=t.getParentOrThrow(),a=t.getFormat();let d=t.getStyle(),c=t.__detail;l=!1,t.isSegmented()?((s=Ar(u)).__format=a,s.__style=d,s.__detail=c,l=!0):(s=t.getWritable()).__text=u,t=Pn(),s=[s],u=u.length;for(let n=1;n<o;n++){var f=e[n],h=f.length;(f=Ar(f).getWritable()).__format=a,f.__style=d,f.__detail=c;let o=f.__key;if(h=u+h,pn(t)){let e=t.anchor,n=t.focus;e.key===r&&\"text\"===e.type&&e.offset>u&&e.offset<=h&&(e.key=o,e.offset-=u,t.dirty=!0),n.key===r&&\"text\"===n.type&&n.offset>u&&n.offset<=h&&(n.key=o,n.offset-=u,t.dirty=!0)}i===r&&Te(o),u=h,s.push(f)}return r=this.getPreviousSibling(),i=this.getNextSibling(),null!==r&&Ne(r),null!==i&&Ne(i),r=n.getWritable(),i=this.getIndexWithinParent(),l?(r.splice(i,0,s),this.remove()):r.splice(i,1,s),pn(t)&&Rn(t,n,i,o-1),s}mergeWithSibling(e){var t=e===this.getPreviousSibling();t||e===this.getNextSibling()||L(50);var n=this.__key;let r=e.__key,i=this.__text,o=i.length;xe()===r&&Te(n);let l=Pn();if(pn(l)){let i=l.anchor,s=l.focus;null!==i&&i.key===r&&(Ln(i,t,n,e,o),l.dirty=!0),null!==s&&s.key===r&&(Ln(s,t,n,e,o),l.dirty=!0)}return n=e.__text,this.setTextContent(t?n+i:i+n),t=this.getWritable(),e.remove(),t}isTextEntity(){return!1}}function Sr(e){let t=\"700\"===e.style.fontWeight,n=\"line-through\"===e.style.textDecoration,r=\"italic\"===e.style.fontStyle,i=\"underline\"===e.style.textDecoration,o=e.style.verticalAlign;return{forChild:e=>kr(e)?(t&&e.toggleFormat(\"bold\"),n&&e.toggleFormat(\"strikethrough\"),r&&e.toggleFormat(\"italic\"),i&&e.toggleFormat(\"underline\"),\"sub\"===o&&e.toggleFormat(\"subscript\"),\"super\"===o&&e.toggleFormat(\"superscript\"),e):e,node:null}}function Er(){return{node:pr()}}function br(e){let t=\"normal\"===e.style.fontWeight;return{forChild:e=>(kr(e)&&!t&&e.toggleFormat(\"bold\"),e),node:null}}function Or(e,t,n){return e=e.textContent||\"\",!n&&/\\n/.test(e)&&0===(e=e.replace(/\\r?\\n/gm,\" \")).trim().length?{node:null}:{node:Ar(e)}}let wr={code:\"code\",em:\"italic\",i:\"italic\",s:\"strikethrough\",strong:\"bold\",sub:\"subscript\",sup:\"superscript\",u:\"underline\"};function Dr(e){let t=wr[e.nodeName.toLowerCase()];return void 0===t?{node:null}:{forChild:e=>(kr(e)&&!e.hasFormat(t)&&e.toggleFormat(t),e),node:null}}function Ar(e=\"\"){return Xe(new xr(e))}function kr(e){return e instanceof xr}class Pr extends lr{static getType(){return\"paragraph\"}static clone(e){return new Pr(e.__key)}createDOM(e){let t=document.createElement(\"p\");return void 0!==(e=Le(e.theme,\"paragraph\"))&&t.classList.add(...e),t}updateDOM(){return!1}static importDOM(){return{p:()=>({conversion:Mr,priority:0})}}exportDOM(e){if(({element:e}=super.exportDOM(e)),e&&this.isEmpty()&&e.append(document.createElement(\"br\")),e){var t=this.getFormatType();e.style.textAlign=t,(t=this.getDirection())&&(e.dir=t),0<(t=this.getIndent())&&(e.style.textIndent=20*t+\"px\")}return{element:e}}static importJSON(e){let t=Rr();return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportJSON(){return{...super.exportJSON(),type:\"paragraph\",version:1}}insertNewAfter(e,t){e=Rr();let n=this.getDirection();return e.setDirection(n),this.insertAfter(e,t),e}collapseAtStart(){let e=this.getChildren();if(0===e.length||kr(e[0])&&\"\"===e[0].getTextContent().trim()){if(null!==this.getNextSibling())return this.selectNext(),this.remove(),!0;if(null!==this.getPreviousSibling())return this.selectPrevious(),this.remove(),!0}return!1}}function Mr(e){let t=Rr();return e.style&&(t.setFormat(e.style.textAlign),0<(e=parseInt(e.style.textIndent,10)/20)&&t.setIndent(e)),{node:t}}function Rr(){return Xe(new Pr)}function $r(e,t,n,r){let i=e._keyToDOMMap;i.clear(),e._editorState=cr(),e._pendingEditorState=r,e._compositionKey=null,e._dirtyType=0,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),e._normalizedNodes=new Set,e._updateTags=new Set,e._updates=[],e._blockCursorElement=null,null!==(r=e._observer)&&(r.disconnect(),e._observer=null),null!==t&&(t.textContent=\"\"),null!==n&&(n.textContent=\"\",i.set(\"root\",n))}class Ir{constructor(e,t,n,r,i,o){this._parentEditor=t,this._rootElement=null,this._editorState=e,this._compositionKey=this._pendingEditorState=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=r,this._nodes=n,this._decorators={},this._pendingDecorators=null,this._dirtyType=0,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=Re(),this._onError=i,this._htmlConversions=o,this._editable=!0,this._headless=null!==t&&t._headless,this._blockCursorElement=this._window=null}isComposing(){return null!=this._compositionKey}registerUpdateListener(e){let t=this._listeners.update;return t.add(e),()=>{t.delete(e)}}registerEditableListener(e){let t=this._listeners.editable;return t.add(e),()=>{t.delete(e)}}registerDecoratorListener(e){let t=this._listeners.decorator;return t.add(e),()=>{t.delete(e)}}registerTextContentListener(e){let t=this._listeners.textcontent;return t.add(e),()=>{t.delete(e)}}registerRootListener(e){let t=this._listeners.root;return e(this._rootElement,null),t.add(e),()=>{e(null,this._rootElement),t.delete(e)}}registerCommand(e,t,n){void 0===n&&L(35);let r=this._commands;r.has(e)||r.set(e,[new Set,new Set,new Set,new Set,new Set]);let i=r.get(e);void 0===i&&L(36);let o=i[n];return o.add(t),()=>{o.delete(t),i.every((e=>0===e.size))&&r.delete(e)}}registerMutationListener(e,t){void 0===this._nodes.get(e.getType())&&L(37);let n=this._listeners.mutation;return n.set(t,e),()=>{n.delete(t)}}registerNodeTransformToKlass(e,t){return e=e.getType(),void 0===(e=this._nodes.get(e))&&L(37),e.transforms.add(t),e}registerNodeTransform(e,t){var n=this.registerNodeTransformToKlass(e,t);let r=[n];return null!=(n=n.replaceWithKlass)&&(n=this.registerNodeTransformToKlass(n,t),r.push(n)),function(e,t){rr(e,(()=>{var e=Jn();if(!e.isEmpty())if(\"root\"===t)De().markDirty();else{e=e._nodeMap;for(let[,t]of e)t.markDirty()}}),null===e._pendingEditorState?{tag:\"history-merge\"}:void 0)}(this,e.getType()),()=>{r.forEach((e=>e.transforms.delete(t)))}}hasNodes(e){for(let t=0;t<e.length;t++){let n=e[t].getType();if(!this._nodes.has(n))return!1}return!0}dispatchCommand(e,t){return er(this,e,t)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(e){let t=this._rootElement;if(e!==t){let i=Le(this._config.theme,\"root\");var n=this._pendingEditorState||this._editorState;if(this._rootElement=e,$r(this,t,e,n),null!==t){if(!this._config.disableEvents){if(0!==Jt&&(Jt--,0===Jt&&t.ownerDocument.removeEventListener(\"selectionchange\",sn)),null!=(n=t.__lexicalEditor)){if(null!==n._parentEditor){var r=Me(n);r=r[r.length-1]._key,ln.get(r)===n&&ln.delete(r)}else ln.delete(n._key);t.__lexicalEditor=null}for(n=on(t),r=0;r<n.length;r++)n[r]();t.__lexicalEventHandles=[]}null!=i&&t.classList.remove(...i)}null!==e?(n=(n=e.ownerDocument)&&n.defaultView||null,(r=e.style).userSelect=\"text\",r.whiteSpace=\"pre-wrap\",r.wordBreak=\"break-word\",e.setAttribute(\"data-lexical-editor\",\"true\"),this._window=n,this._dirtyType=2,ue(this),this._updateTags.add(\"history-merge\"),Qn(this),this._config.disableEvents||function(e,t){0===Jt&&e.ownerDocument.addEventListener(\"selectionchange\",sn),Jt++,e.__lexicalEditor=t;let n=on(e);for(let r=0;r<zt.length;r++){let[i,o]=zt[r],l=\"function\"==typeof o?e=>{!0!==e._lexicalHandled&&(e._lexicalHandled=!0,t.isEditable()&&o(e,t))}:e=>{if(!0!==e._lexicalHandled&&(e._lexicalHandled=!0,t.isEditable()))switch(i){case\"cut\":return er(t,M,e);case\"copy\":return er(t,P,e);case\"paste\":return er(t,a,e);case\"dragstart\":return er(t,D,e);case\"dragover\":return er(t,A,e);case\"dragend\":return er(t,k,e);case\"focus\":return er(t,R,e);case\"blur\":return er(t,$,e);case\"drop\":return er(t,w,e)}};e.addEventListener(i,l),n.push((()=>{e.removeEventListener(i,l)}))}}(e,this),null!=i&&e.classList.add(...i)):this._window=null,Zn(\"root\",this,!1,e,t)}}getElementByKey(e){return this._keyToDOMMap.get(e)||null}getEditorState(){return this._editorState}setEditorState(e,t){e.isEmpty()&&L(38),ae(this);let n=this._pendingEditorState,r=this._updateTags;t=void 0!==t?t.tag:null,null===n||n.isEmpty()||(null!=t&&r.add(t),Qn(this)),this._pendingEditorState=e,this._dirtyType=2,this._dirtyElements.set(\"root\",!1),this._compositionKey=null,null!=t&&r.add(t),Qn(this)}parseEditorState(e,t){e=\"string\"==typeof e?JSON.parse(e):e;let n=cr(),r=Bn,i=Kn,o=Wn,l=this._dirtyElements,s=this._dirtyLeaves,a=this._cloneNotNeeded,u=this._dirtyType;this._dirtyElements=new Map,this._dirtyLeaves=new Set,this._cloneNotNeeded=new Set,this._dirtyType=0,Bn=n,Kn=!1,Wn=this;try{Xn(e.root,this._nodes),t&&t(),n._readOnly=!0}catch(e){e instanceof Error&&this._onError(e)}finally{this._dirtyElements=l,this._dirtyLeaves=s,this._cloneNotNeeded=a,this._dirtyType=u,Bn=r,Kn=i,Wn=o}return n}update(e,t){rr(this,e,t)}focus(e,t={}){let n=this._rootElement;null!==n&&(n.setAttribute(\"autocapitalize\",\"off\"),rr(this,(()=>{let e=Pn(),n=De();null!==e?e.dirty=!0:0!==n.getChildrenSize()&&(\"rootStart\"===t.defaultSelection?n.selectStart():n.selectEnd())}),{onUpdate:()=>{n.removeAttribute(\"autocapitalize\"),e&&e()},tag:\"focus\"}),null===this._pendingEditorState&&n.removeAttribute(\"autocapitalize\"))}blur(){var e=this._rootElement;null!==e&&e.blur(),null!==(e=et(this._window))&&e.removeAllRanges()}isEditable(){return this._editable}setEditable(e){this._editable!==e&&(this._editable=e,Zn(\"editable\",this,!0,e))}toJSON(){return{editorState:this._editorState.toJSON()}}}class Lr extends lr{constructor(e,t){super(t),this.__colSpan=e,this.__rowSpan=1}exportJSON(){return{...super.exportJSON(),colSpan:this.__colSpan}}setColSpan(e){return this.getWritable().__colSpan=e,this}setRowSpan(e){return this.getWritable().__rowSpan=e,this}}function Fr(e){return e instanceof Lr}class Br extends lr{}function Wr(e){return e instanceof Br}class Kr extends lr{}function zr(e){return e instanceof Kr}t.$addUpdateTag=function(e){Hn(),Un()._updateTags.add(e)},t.$applyNodeReplacement=Xe,t.$copyNode=Ve,t.$createLineBreakNode=pr,t.$createNodeSelection=An,t.$createParagraphNode=Rr,t.$createRangeSelection=function(){let e=new dn(\"root\",0,\"element\"),t=new dn(\"root\",0,\"element\");return new vn(e,t,0,\"\")},t.$createTextNode=Ar,t.$getAdjacentNode=We,t.$getNearestNodeFromDOMNode=be,t.$getNearestRootOrShadowRoot=Je,t.$getNodeByKey=Se,t.$getPreviousSelection=Mn,t.$getRoot=De,t.$getSelection=Pn,t.$getTextContent=function(){let e=Pn();return null===e?\"\":e.getTextContent()},t.$hasAncestor=Ye,t.$insertNodes=function(e,t){let n=Pn();return null===n&&(n=De().selectEnd()),n.insertNodes(e,t)},t.$isDecoratorNode=or,t.$isElementNode=sr,t.$isInlineElementOrDecoratorNode=function(e){return sr(e)&&e.isInline()||or(e)&&e.isInline()},t.$isLeafNode=me,t.$isLineBreakNode=yr,t.$isNodeSelection=Cn,t.$isParagraphNode=function(e){return e instanceof Pr},t.$isRangeSelection=pn,t.$isRootNode=dr,t.$isRootOrShadowRoot=Ue,t.$isTextNode=kr,t.$nodesOfType=function(e){var t=Jn();let n=t._readOnly,r=e.getType();t=t._nodeMap;let i=[];for(let[,o]of t)o instanceof e&&o.__type===r&&(n||o.isAttached())&&i.push(o);return i},t.$normalizeSelection__EXPERIMENTAL=at,t.$parseSerializedNode=function(e){return Xn(e,Un()._nodes)},t.$setCompositionKey=Te,t.$setSelection=Ae,t.$splitNode=tt,t.BLUR_COMMAND=$,t.CAN_REDO_COMMAND={},t.CAN_UNDO_COMMAND={},t.CLEAR_EDITOR_COMMAND={},t.CLEAR_HISTORY_COMMAND={},t.CLICK_COMMAND=r,t.COMMAND_PRIORITY_CRITICAL=4,t.COMMAND_PRIORITY_EDITOR=0,t.COMMAND_PRIORITY_HIGH=3,t.COMMAND_PRIORITY_LOW=1,t.COMMAND_PRIORITY_NORMAL=2,t.CONTROLLED_TEXT_INSERTION_COMMAND=s,t.COPY_COMMAND=P,t.CUT_COMMAND=M,t.DELETE_CHARACTER_COMMAND=i,t.DELETE_LINE_COMMAND=c,t.DELETE_WORD_COMMAND=d,t.DEPRECATED_$computeGridMap=Fn,t.DEPRECATED_$createGridSelection=function(){let e=new dn(\"root\",0,\"element\"),t=new dn(\"root\",0,\"element\");return new yn(\"root\",e,t)},t.DEPRECATED_$getNodeTriplet=function(e){if(!(e instanceof Lr))if(e instanceof un){if(!Fr(e=nt(e,Fr)))throw Error(\"Expected to find a parent GridCellNode\")}else if(!Fr(e=nt(e.getNode(),Fr)))throw Error(\"Expected to find a parent GridCellNode\");let t=e.getParent();if(!zr(t))throw Error(\"Expected GridCellNode to have a parent GridRowNode\");let n=t.getParent();if(!Wr(n))throw Error(\"Expected GridRowNode to have a parent GridNode\");return[e,t,n]},t.DEPRECATED_$isGridCellNode=Fr,t.DEPRECATED_$isGridNode=Wr,t.DEPRECATED_$isGridRowNode=zr,t.DEPRECATED_$isGridSelection=mn,t.DEPRECATED_GridCellNode=Lr,t.DEPRECATED_GridNode=Br,t.DEPRECATED_GridRowNode=Kr,t.DRAGEND_COMMAND=k,t.DRAGOVER_COMMAND=A,t.DRAGSTART_COMMAND=D,t.DROP_COMMAND=w,t.DecoratorNode=ir,t.ElementNode=lr,t.FOCUS_COMMAND=R,t.FORMAT_ELEMENT_COMMAND={},t.FORMAT_TEXT_COMMAND=f,t.INDENT_CONTENT_COMMAND={},t.INSERT_LINE_BREAK_COMMAND=o,t.INSERT_PARAGRAPH_COMMAND=l,t.KEY_ARROW_DOWN_COMMAND=N,t.KEY_ARROW_LEFT_COMMAND=m,t.KEY_ARROW_RIGHT_COMMAND=p,t.KEY_ARROW_UP_COMMAND=C,t.KEY_BACKSPACE_COMMAND=S,t.KEY_DELETE_COMMAND=b,t.KEY_DOWN_COMMAND=_,t.KEY_ENTER_COMMAND=T,t.KEY_ESCAPE_COMMAND=E,t.KEY_MODIFIER_COMMAND=I,t.KEY_SPACE_COMMAND=x,t.KEY_TAB_COMMAND=O,t.LineBreakNode=gr,t.MOVE_TO_END=y,t.MOVE_TO_START=v,t.OUTDENT_CONTENT_COMMAND={},t.PASTE_COMMAND=a,t.ParagraphNode=Pr,t.REDO_COMMAND=g,t.REMOVE_TEXT_COMMAND=u,t.RootNode=ur,t.SELECTION_CHANGE_COMMAND=n,t.TextNode=xr,t.UNDO_COMMAND=h,t.createCommand=function(){return{}},t.createEditor=function(e){var t=e||{},n=Wn,r=t.theme||{};let i=void 0===e?n:t.parentEditor||null,o=t.disableEvents||!1,l=cr(),s=t.namespace||(null!==i?i._config.namespace:Re()),a=t.editorState,u=[ur,xr,gr,Pr,...t.nodes||[]],d=t.onError;if(t=void 0===t.editable||t.editable,void 0===e&&null!==n)e=n._nodes;else for(e=new Map,n=0;n<u.length;n++){let t=u[n],r=null;var c=null;\"function\"!=typeof t&&(t=(c=t).replace,r=c.with,c=c.withKlass?c.withKlass:null);let i=t.getType(),o=t.transform(),l=new Set;null!==o&&l.add(o),e.set(i,{klass:t,replace:r,replaceWithKlass:c,transforms:l})}return r=new Ir(l,i,e,{disableEvents:o,namespace:s,theme:r},d||console.error,function(e){let t=new Map,n=new Set;return e.forEach((e=>{if(null!=(e=null!=e.klass.importDOM?e.klass.importDOM.bind(e.klass):null)&&!n.has(e)){n.add(e);var r=e();null!==r&&Object.keys(r).forEach((e=>{let n=t.get(e);void 0===n&&(n=[],t.set(e,n)),n.push(r[e])}))}})),t}(e),t),void 0!==a&&(r._pendingEditorState=a,r._dirtyType=2),r},t.getNearestEditorFromDOMNode=ge,t.isSelectionWithinEditor=he}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.r=e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var r={};return(()=>{n.r(r);var e=n(998),t=n(903);function i(e){return i=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},i(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function l(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){var t=function(e,t){if(\"object\"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||\"default\");if(\"object\"!==i(r))return r;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===t?String:Number)(e)}(e,\"string\");return\"symbol\"===i(t)?t:String(t)}var a,u=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),l(this,\"token\",void 0),l(this,\"resolver\",void 0),this.token=t,this.resolver=n}var t,n,r;return t=e,n=[{key:\"resolve\",value:function(){if(this.resolver){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.resolver.apply(this,t)}throw Error(\"Unregistered Resolver: \".concat(this.token))}}],n&&o(t.prototype,n),r&&o(t,r),Object.defineProperty(t,\"prototype\",{writable:!1}),e}();function d(e){return d=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},d(e)}function c(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */c=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i=\"function\"==typeof Symbol?Symbol:{},o=i.iterator||\"@@iterator\",l=i.asyncIterator||\"@@asyncIterator\",s=i.toStringTag||\"@@toStringTag\";function a(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},\"\")}catch(e){a=function(e,t,n){return e[t]=n}}function u(e,t,n,i){var o=t&&t.prototype instanceof g?t:g,l=Object.create(o.prototype),s=new O(i||[]);return r(l,\"_invoke\",{value:x(e,n,s)}),l}function f(e,t,n){try{return{type:\"normal\",arg:e.call(t,n)}}catch(e){return{type:\"throw\",arg:e}}}e.wrap=u;var h={};function g(){}function _(){}function p(){}var y={};a(y,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(w([])));v&&v!==t&&n.call(v,o)&&(y=v);var C=p.prototype=g.prototype=Object.create(y);function N(e){[\"next\",\"throw\",\"return\"].forEach((function(t){a(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function i(r,o,l,s){var a=f(e[r],e,o);if(\"throw\"!==a.type){var u=a.arg,c=u.value;return c&&\"object\"==d(c)&&n.call(c,\"__await\")?t.resolve(c.__await).then((function(e){i(\"next\",e,l,s)}),(function(e){i(\"throw\",e,l,s)})):t.resolve(c).then((function(e){u.value=e,l(u)}),(function(e){return i(\"throw\",e,l,s)}))}s(a.arg)}var o;r(this,\"_invoke\",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return o=o?o.then(r,r):r()}})}function x(e,t,n){var r=\"suspendedStart\";return function(i,o){if(\"executing\"===r)throw new Error(\"Generator is already running\");if(\"completed\"===r){if(\"throw\"===i)throw o;return D()}for(n.method=i,n.arg=o;;){var l=n.delegate;if(l){var s=S(l,n);if(s){if(s===h)continue;return s}}if(\"next\"===n.method)n.sent=n._sent=n.arg;else if(\"throw\"===n.method){if(\"suspendedStart\"===r)throw r=\"completed\",n.arg;n.dispatchException(n.arg)}else\"return\"===n.method&&n.abrupt(\"return\",n.arg);r=\"executing\";var a=f(e,t,n);if(\"normal\"===a.type){if(r=n.done?\"completed\":\"suspendedYield\",a.arg===h)continue;return{value:a.arg,done:n.done}}\"throw\"===a.type&&(r=\"completed\",n.method=\"throw\",n.arg=a.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,\"throw\"===n&&e.iterator.return&&(t.method=\"return\",t.arg=void 0,S(e,t),\"throw\"===t.method)||\"return\"!==n&&(t.method=\"throw\",t.arg=new TypeError(\"The iterator does not provide a '\"+n+\"' method\")),h;var i=f(r,e.iterator,t.arg);if(\"throw\"===i.type)return t.method=\"throw\",t.arg=i.arg,t.delegate=null,h;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,\"return\"!==t.method&&(t.method=\"next\",t.arg=void 0),t.delegate=null,h):o:(t.method=\"throw\",t.arg=new TypeError(\"iterator result is not an object\"),t.delegate=null,h)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function b(e){var t=e.completion||{};t.type=\"normal\",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:\"root\"}],e.forEach(E,this),this.reset(!0)}function w(e){if(e){var t=e[o];if(t)return t.call(e);if(\"function\"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:D}}function D(){return{value:void 0,done:!0}}return _.prototype=p,r(C,\"constructor\",{value:p,configurable:!0}),r(p,\"constructor\",{value:_,configurable:!0}),_.displayName=a(p,s,\"GeneratorFunction\"),e.isGeneratorFunction=function(e){var t=\"function\"==typeof e&&e.constructor;return!!t&&(t===_||\"GeneratorFunction\"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,a(e,s,\"GeneratorFunction\")),e.prototype=Object.create(C),e},e.awrap=function(e){return{__await:e}},N(T.prototype),a(T.prototype,l,(function(){return this})),e.AsyncIterator=T,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var l=new T(u(t,n,r,i),o);return e.isGeneratorFunction(n)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},N(C),a(C,s,\"Generator\"),a(C,o,(function(){return this})),a(C,\"toString\",(function(){return\"[object Generator]\"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=w,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method=\"next\",this.arg=void 0,this.tryEntries.forEach(b),!e)for(var t in this)\"t\"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if(\"throw\"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return l.type=\"throw\",l.arg=e,t.next=n,r&&(t.method=\"next\",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],l=o.completion;if(\"root\"===o.tryLoc)return r(\"end\");if(o.tryLoc<=this.prev){var s=n.call(o,\"catchLoc\"),a=n.call(o,\"finallyLoc\");if(s&&a){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!a)throw new Error(\"try statement without catch or finally\");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,\"finallyLoc\")&&this.prev<i.finallyLoc){var o=i;break}}o&&(\"break\"===e||\"continue\"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var l=o?o.completion:{};return l.type=e,l.arg=t,o?(this.method=\"next\",this.next=o.finallyLoc,h):this.complete(l)},complete:function(e,t){if(\"throw\"===e.type)throw e.arg;return\"break\"===e.type||\"continue\"===e.type?this.next=e.arg:\"return\"===e.type?(this.rval=this.arg=e.arg,this.method=\"return\",this.next=\"end\"):\"normal\"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),b(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if(\"throw\"===r.type){var i=r.arg;b(n)}return i}}throw new Error(\"illegal catch attempt\")},delegateYield:function(e,t,n){return this.delegate={iterator:w(e),resultName:t,nextLoc:n},\"next\"===this.method&&(this.arg=void 0),h}},e}function f(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if(\"undefined\"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e[\"@@iterator\"])return Array.from(e)}(e)||function(e,t){if(!e)return;if(\"string\"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);\"Object\"===n&&e.constructor&&(n=e.constructor.name);if(\"Map\"===n||\"Set\"===n)return Array.from(e);if(\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t,n,r,i,o,l){try{var s=e[o](l),a=s.value}catch(e){return void n(e)}s.done?t(a):Promise.resolve(a).then(r,i)}function _(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function l(e){g(o,r,i,l,s,\"next\",e)}function s(e){g(o,r,i,l,s,\"throw\",e)}l(void 0)}))}}function p(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,C(r.key),r)}}function m(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),Object.defineProperty(e,\"prototype\",{writable:!1}),e}function v(e,t,n){return(t=C(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e){var t=function(e,t){if(\"object\"!==d(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||\"default\");if(\"object\"!==d(r))return r;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===t?String:Number)(e)}(e,\"string\");return\"symbol\"===d(t)?t:String(t)}!function(e){e[e.CALL=0]=\"CALL\",e[e.CALLBACK=1]=\"CALLBACK\",e[e.Promise=2]=\"Promise\"}(a||(a={}));var N=function(){},T=function(){for(var e=[],t=\"0123456789abcdef\",n=0;n<36;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);return e[14]=\"4\",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]=\"-\",e.join(\"\")},x=function(){function e(){p(this,e),v(this,\"queue\",[]),v(this,\"callbackPool\",new Map),v(this,\"sender\",N)}var t,n,r,i;return m(e,[{key:\"setSender\",value:function(e){this.sender=e}},{key:\"isConnected\",value:function(){return this.sender!==N}},{key:\"createPromise\",value:function(){var e=this,t=T();return{promise:new Promise((function(n,r){e.callbackPool.set(t,{resolve:n,reject:r})})),id:t}}},{key:\"resolvePromise\",value:function(e,t){this.dispatch({key:e,actionType:a.Promise,token:\"PROMISE\",payload:JSON.stringify({}),id:t})}},{key:\"callResolver\",value:(i=_(c().mark((function e(t,n,r){var i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.get(t)){e.next=5;break}throw new Error(\"Unregistered Resolver: \".concat(String(t)));case 5:return e.abrupt(\"return\",i.resolve.apply(i,f(r)));case 6:case\"end\":return e.stop()}}),e)}))),function(e,t,n){return i.apply(this,arguments)})},{key:\"execute\",value:(r=_(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve();case 2:for(;t--;)r=this.queue.shift(),this.consume(r,n);case 3:case\"end\":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:\"consume\",value:(n=_(c().mark((function e(t,n){var r,i,o,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.actionType,e.next=e.t0===a.Promise||e.t0===a.CALLBACK?3:e.t0===a.CALL?6:13;break;case 3:return(r=this.callbackPool.get(t.id))&&(t.error?r.reject(JSON.parse(t.error)):r.resolve(t.payload?JSON.parse(t.payload):\"\"),this.callbackPool.delete(t.id)),e.abrupt(\"break\",14);case 6:return i=t.payload?JSON.parse(t.payload):[],e.next=9,this.callResolver(t.token,n,i);case 9:return o=e.sent,l={key:t.key,actionType:a.CALLBACK,token:t.token,id:t.id,payload:JSON.stringify(o)},this.dispatch(l),e.abrupt(\"break\",14);case 13:return e.abrupt(\"return\");case 14:case\"end\":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:\"dispatch\",value:(t=_(c().mark((function e(t){var n=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.actionType,e.next=e.t0===a.Promise||e.t0===a.CALLBACK?3:e.t0===a.CALL?5:7;break;case 3:return this.sender(JSON.stringify(t)),e.abrupt(\"return\",Promise.resolve({}));case 5:return this.sender(JSON.stringify(t)),e.abrupt(\"return\",new Promise((function(e,r){n.callbackPool.set(t.id,{resolve:e,reject:r})})));case 7:return e.abrupt(\"return\",Promise.resolve({}));case 8:case\"end\":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:\"on\",value:function(e,t){var n=JSON.parse(e);this.queue.push(n),this.execute(this.queue.length,t)}}],[{key:\"getInstance\",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}();v(x,\"instance\",void 0);var S,E,b,O,w=function(){function e(t,n){p(this,e),v(this,\"resolvers\",new Map),v(this,\"key\",void 0),this.key=t,this.registerResolvers(n)}return m(e,[{key:\"createPromise\",value:function(){return e.transceiver.createPromise()}},{key:\"resolvePromise\",value:function(t){return e.transceiver.resolvePromise(this.key,t)}},{key:\"registerResolvers\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(t).forEach((function(n){var r;e.resolvers.set(n,new u(n,null!==(r=t[n])&&void 0!==r?r:N))}))}},{key:\"on\",value:function(t){e.transceiver.on(t,this.resolvers)}},{key:\"call\",value:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return e.transceiver.dispatch({key:this.key,actionType:a.CALL,token:t,payload:JSON.stringify(r),id:T()})}}],[{key:\"setSender\",value:function(t){e.transceiver.setSender(t)}}]),e}();v(w,\"transceiver\",x.getInstance()),function(e){e.OnTextChange=\"@CALL[OnTextChange]__builtin\",e.OnSelectionChange=\"@CALL[OnSelectionChange]__builtin\",e.UpdateFormat=\"@CALL[UpdateFormat]__builtin\",e.SetReactNativeState=\"@CALL[SetReactNativeState]__builtin\",e.ScrollWebView=\"@CALL[ScrollWebView]__builtin\",e.OnWebViewInit=\"@CALL[onWebViewInit]__builtin\",e.OnEditorReady=\"@CALL[OnEditorReady]__builtin\",e.OnMentionsOpen=\"@CALL[OnMentionsOpen]__builtin\",e.OnMentionsClose=\"@CALL[OnMentionsClose]__builtin\"}(S||(S={})),function(e){e[e.UP=0]=\"UP\",e[e.DOWN=1]=\"DOWN\"}(E||(E={})),function(e){e.AddImage=\"@CALL[AddImage]__builtin\",e.Undo=\"@CALL[Undo]__builtin\",e.Redo=\"@CALL[Redo]__builtin\",e.GetContents=\"@CALL[GetContents]__builtin\",e.GetMarkdown=\"@CALL[GetMarkdown]__builtin\",e.GetLength=\"@CALL[GetLength]__builtin\",e.GetText=\"@CALL[GetText]__builtin\",e.SetContents=\"@CALL[SetContents]__builtin\",e.SetText=\"@CALL[SetText]__builtin\",e.Format=\"@CALL[Format]__builtin\",e.SetSelection=\"@CALL[SetSelection]__builtin\",e.Blur=\"@CALL[Blur]__builtin\",e.Focus=\"@CALL[Focus]__builtin\",e.QuillAPI=\"@CALL[QuillAPI]__builtin\",e.Layout=\"@CALL[Layout]__builtin\"}(b||(b={})),function(e){e.LoadAssets=\"@CALL[LoadAssets]__builtin\"}(O||(O={}));var D=\"$QuillEditorKey\",A=\"$Bridge__builtin\",k=\"$WebViewBridgeSDK\";function P(e){return P=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},P(e)}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,$(r.key),r)}}function R(e,t,n){return(t=$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $(e){var t=function(e,t){if(\"object\"!==P(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||\"default\");if(\"object\"!==P(r))return r;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===t?String:Number)(e)}(e,\"string\");return\"symbol\"===P(t)?t:String(t)}var I=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e)}var t,n,r;return t=e,r=[{key:\"getInstance\",value:function(){return e.instance||(e.instance=new e),e.instance}}],(n=[{key:\"subscribe\",value:function(t){e.subscriptions.push(t)}},{key:\"publish\",value:function(t){e.subscriptions.forEach((function(e){return e(t)}))}}])&&M(t.prototype,n),r&&M(t,r),Object.defineProperty(t,\"prototype\",{writable:!1}),e}();function L(e){return L=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},L(e)}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,W(r.key),r)}}function B(e,t,n){return(t=W(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W(e){var t=function(e,t){if(\"object\"!==L(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||\"default\");if(\"object\"!==L(r))return r;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===t?String:Number)(e)}(e,\"string\");return\"symbol\"===L(t)?t:String(t)}R(I,\"subscriptions\",[]),R(I,\"instance\",void 0);var K=50;function z(n){var r=new(function(){function n(r){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,n),B(this,\"scrollOffsetBuffer\",K),B(this,\"editor\",void 0),B(this,\"history\",void 0),B(this,\"bridge\",void 0),B(this,\"viewHeight\",0),B(this,\"previousContentLength\",0);var i=r.bridge;r.options;this.bridge=i;var o={namespace:\"MyEditor\",onError:console.error},l=(0,e.createEditor)(o);this.editor=l;var s=document.createElement(\"div\");s.contentEditable=\"true\",window.document.body.append(s),l.setRootElement(s),(0,t.registerRichText)(l),this.updateViewHeight(),this.setEvents()}var r,i,o;return r=n,(i=[{key:\"setEvents\",value:function(){var e=this;this.editor.registerTextContentListener((function(){e.updateViewHeight(),e.calculateScrollOffsetWhenTextChange()}))}},{key:\"updateViewHeight\",value:function(){var e=this;setTimeout((function(){var t,n=null===(t=e.editor.getRootElement())||void 0===t?void 0:t.getBoundingClientRect();n&&(e.viewHeight!==n.height&&e.bridge.call(S.SetReactNativeState,\"webViewHeight\",JSON.stringify(n.height)),e.viewHeight=n.height)}))}},{key:\"calculateScrollOffsetWhenTextChange\",value:function(){var t=this;this.editor.getEditorState().read((function(){var n,r,i=(0,e.$getTextContent)().length,o=(0,e.$getSelection)(),l=null===(n=t.editor.getElementByKey((null==o?void 0:o.getNodes()[0].getKey())||\"\"))||void 0===n?void 0:n.getBoundingClientRect(),s=null===(r=t.editor.getElementByKey((null==o?void 0:o.getNodes()[(null==o?void 0:o.getNodes().length)-1].getKey())||\"\"))||void 0===r?void 0:r.getBoundingClientRect();if(l&&s){var a=t.previousContentLength<=i?E.DOWN:E.UP,u=Math.min(l.bottom,s.bottom),d=Math.min(l.top,s.top),c=a===E.DOWN?u+t.scrollOffsetBuffer:d-t.scrollOffsetBuffer;-1!==c&&t.bridge.call(S.ScrollWebView,c,a),t.previousContentLength=i}}))}},{key:\"blur\",value:function(){}},{key:\"registerResolvers\",value:function(){var e=this;this.bridge.registerResolvers(B({},b.Layout,(function(){return e.calculateScrollOffsetWhenTextChange()})))}}])&&F(r.prototype,i),o&&F(r,o),Object.defineProperty(r,\"prototype\",{writable:!1}),n}())(n);return window[k][D]=r,r}function G(e){return G=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},G(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,Y(r.key),r)}}function Y(e){var t=function(e,t){if(\"object\"!==G(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||\"default\");if(\"object\"!==G(r))return r;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===t?String:Number)(e)}(e,\"string\");return\"symbol\"===G(t)?t:String(t)}var H=function(){function e(){var t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),t=this,n=\"bridges\",r=new Map,(n=Y(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}var t,n,r;return t=e,(n=[{key:\"register\",value:function(e,t){this.bridges.set(e,new w(e,t))}},{key:\"get\",value:function(e){return this.bridges.get(e)}},{key:\"on\",value:function(e){var t=JSON.parse(e),n=this.bridges.get(t.key);null==n||n.on(e)}}])&&j(t.prototype,n),r&&j(t,r),Object.defineProperty(t,\"prototype\",{writable:!1}),e}();try{!function(){window[k]={},w.setSender((function(e){return window.ReactNativeWebView.postMessage(e)}));var e=new H;window[k].$BridgeRegistryKey=e,e.register(A);var t=e.get(A);z({bridge:t,options:{}}),t.call(S.OnEditorReady)}()}catch(e){var J=document.createElement(\"div\");J.innerText=e.message,document.body.append(J)}})(),r})()));</script></body><style>* { padding: 0; margin: 0; }</style></html>"